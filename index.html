<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ØªØ¬Ø± Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ 1 - Ù†Ø¸Ø§Ù… Ø§Ù„Ø®ÙŠØ§Ø·Ø© Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    
    <style>
        :root { --gold: #d4af37; --brown: #5d4037; --bg: #fdfbf7; --white: #ffffff; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background-color: var(--bg); margin: 0; padding: 10px; direction: rtl; }
        .main-container { max-width: 600px; margin: auto; background: var(--white); border-radius: 20px; border: 1px solid var(--gold); box-shadow: 0 10px 30px rgba(0,0,0,0.1); overflow: hidden; }
        .header { text-align: center; padding: 20px; border-bottom: 2px solid var(--gold); background: #fff; }
        .logo { width: 130px; }
        
        /* Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„ */
        .cust-info { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 15px; background: #fff9eb; }
        .cust-info input { padding: 12px; border: 1px solid #ddd; border-radius: 8px; width: 100%; box-sizing: border-box; outline: none; }

        /* Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª */
        .main-tabs { display: flex; background: #eee; }
        .tab-btn { flex: 1; padding: 15px; border: none; cursor: pointer; font-weight: bold; color: #666; transition: 0.3s; font-size: 16px; }
        .tab-btn.active { background: var(--gold); color: white; }

        .section { display: none; padding: 15px; }
        .section.active { display: block; }
        
        /* Ø´Ø¨ÙƒØ© Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª */
        .measure-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin: 10px 0; background: #fff; padding: 10px; border-radius: 10px; border: 1px solid #eee; }
        .measure-grid div { text-align: center; }
        .measure-grid label { font-size: 11px; color: var(--brown); font-weight: bold; display: block; margin-bottom: 4px; }
        .measure-grid input { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px; text-align: center; box-sizing: border-box; }

        /* Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø®ÙŠØ§Ø·Ø© */
        .tailor-options { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; }
        .tailor-options select { padding: 10px; border-radius: 8px; border: 1px solid #ddd; background: #fdfbf7; font-size: 13px; }

        /* Ù‚Ø³Ù… Ø§Ù„Ø¯ÙØ¹ */
        .payment-card { background: #e8f5e9; padding: 15px; border-radius: 12px; border: 1px solid #2e7d32; margin: 15px 0; }
        .payment-card h4 { margin: 0 0 10px 0; color: #1b5e20; border-bottom: 1px solid #c8e6c9; padding-bottom: 5px; }
        .wallet { background: white; padding: 8px 12px; border-radius: 8px; margin-bottom: 5px; font-size: 14px; display: flex; justify-content: space-between; align-items: center; border-right: 4px solid #2e7d32; }

        .btn-submit { width: 100%; padding: 18px; background: var(--brown); color: white; border: none; border-radius: 15px; font-size: 18px; font-weight: bold; cursor: pointer; margin-top: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        .btn-submit:active { transform: scale(0.98); }

        /* Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¬Ø§Ù‡Ø²Ø© */
        .ready-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .product-item { border: 1px solid #eee; border-radius: 15px; overflow: hidden; background: white; text-align: center; padding-bottom: 10px; }
        .product-item img { width: 100%; height: 140px; object-fit: cover; }
    </style>
</head>
<body>

<div class="main-container">
    <div class="header">
        <img src="https://i.ibb.co/C3YFp0k7/688339f4-1296-48c0-bc66-3be039832675.png" class="logo">
        <h2 style="margin:5px 0 0 0; color:var(--brown); font-size: 20px;">Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ Ù„Ù„Ø®ÙŠØ§Ø·Ø© Ø§Ù„Ø±Ø¬Ø§Ù„ÙŠØ©</h2>
    </div>

    <div class="cust-info">
        <input type="text" id="cust_name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„ÙƒØ§Ù…Ù„">
        <input type="tel" id="cust_phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„">
    </div>

    <div class="main-tabs">
        <button class="tab-btn active" onclick="openTab(event, 'tailor_section')">Ù‚Ø³Ù… Ø§Ù„ØªÙØµÙŠÙ„</button>
        <button class="tab-btn" onclick="openTab(event, 'ready_section')">Ø§Ù„Ø¬Ø§Ù‡Ø²</button>
    </div>

    <div id="tailor_section" class="section active">
        <h4 style="margin:0 0 10px 0; color:var(--brown);">Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© (Ù‡Ù†Ø´):</h4>
        <div class="measure-grid">
            <div><label>Ø§Ù„Ø·ÙˆÙ„</label><input type="number" step="0.1" id="m_len"></div>
            <div><label>Ø§Ù„ÙƒØªÙ</label><input type="number" step="0.1" id="m_sh"></div>
            <div><label>Ø§Ù„ÙŠØ¯</label><input type="number" step="0.1" id="m_hand"></div>
            <div><label>Ø§Ù„ØµØ¯Ø±</label><input type="number" step="0.1" id="m_ch"></div>
            <div><label>Ø§Ù„Ø±Ù‚Ø¨Ø©</label><input type="number" step="0.1" id="m_neck"></div>
            <div><label>ÙˆØ³Ø· ÙŠØ¯</label><input type="number" step="0.1" id="m_waist"></div>
            <div><label>Ø§Ù„ÙƒØ¨Ùƒ</label><input type="number" step="0.1" id="m_cuff"></div>
            <div><label>Ø§Ù„Ø®Ø·ÙˆØ©</label><input type="number" step="0.1" id="m_step"></div>
        </div>

        <h4 style="margin:15px 0 10px 0; color:var(--brown);">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®ÙŠØ§Ø·Ø©:</h4>
        <div class="tailor-options">
            <select id="s_neck"><option>Ø±Ù‚Ø¨Ø© (Ù‚Ù„Ø§Ø¨)</option><option>Ø±Ù‚Ø¨Ø© (Ø³Ø§Ø¯Ø©)</option><option>Ø±Ù‚Ø¨Ø© (Ø±Ø³Ù…ÙŠ)</option></select>
            <select id="s_cuff"><option>ÙƒØ¨Ùƒ (Ù…Ø±Ø¨Ø¹)</option><option>ÙƒØ¨Ùƒ (Ø¯Ø§Ø¦Ø±ÙŠ)</option><option>Ø³Ø§Ø¯Ø© Ø¨Ø¯ÙˆÙ† ÙƒØ¨Ùƒ</option></select>
            <select id="s_pocket"><option>Ø¬ÙŠØ¨ (Ù…Ø®ÙÙŠ)</option><option>Ø¬ÙŠØ¨ (Ø¸Ø§Ù‡Ø±)</option></select>
            <select id="s_button"><option>Ø²Ø±Ø§ÙŠØ± (Ù…Ø®ÙÙŠ)</option><option>Ø²Ø±Ø§ÙŠØ± (Ø¸Ø§Ù‡Ø±)</option></select>
        </div>

        <div class="payment-card">
            <h4>Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹ (Ø§Ù„Ù…Ø­Ø§ÙØ¸):</h4>
            <div class="wallet"><span>ğŸ’° ÙƒØ±ÙŠÙ…ÙŠ:</span> <b>12345678</b></div>
            <div class="wallet"><span>ğŸ“± Ø¬ÙˆØ§Ù„ÙŠ:</span> <b>773463560</b></div>
            <p style="font-size:11px; color:#555; margin:5px 0 0 0;">* ÙŠØ±Ø¬Ù‰ Ø¥Ø±Ø³Ø§Ù„ ØµÙˆØ±Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨.</p>
        </div>

        <button class="btn-submit" onclick="sendOrder()">Ø­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨ ÙˆØªØ£ÙƒÙŠØ¯Ù‡</button>
    </div>

    <div id="ready_section" class="section">
        <div class="ready-grid" id="ready_display">
            <p style="grid-column: 1/3; text-align: center; color: #888; padding: 20px;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£ØµÙ†Ø§Ù Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©...</p>
        </div>
    </div>
</div>

<script>
    // ØªÙ‡ÙŠØ¦Ø© Firebase
    const firebaseConfig = {
        apiKey: "AIzaSyAT4_kbAgDL8Jw5V2jRj3mqyD-lA84ECjY", // Ø§Ø³ØªØ¨Ø¯Ù„Ù‡Ø§ Ø¨Ù…ÙØªØ§Ø­Ùƒ Ø§Ù„Ø®Ø§Øµ Ø¥Ø°Ø§ ØªØºÙŠØ±
        databaseURL: "https://alyarmok-store-default-rtdb.firebaseio.com"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
    function openTab(evt, sectionName) {
        document.querySelectorAll(".section").forEach(s => s.classList.remove("active"));
        document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
        document.getElementById(sectionName).classList.add("active");
        evt.currentTarget.classList.add("active");
    }

    // Ø¥Ø±Ø³Ø§Ù„ ÙˆØ­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨
    function sendOrder() {
        const name = document.getElementById('cust_name').value;
        const phone = document.getElementById('cust_phone').value;

        if(!name || !phone) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… ÙˆØ±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ Ø£ÙˆÙ„Ø§Ù‹!");

        const order = {
            customer: name,
            phone: phone,
            date: new Date().toLocaleString(),
            measures: {
                len: document.getElementById('m_len').value,
                sh: document.getElementById('m_sh').value,
                hand: document.getElementById('m_hand').value,
                ch: document.getElementById('m_ch').value,
                neck: document.getElementById('m_neck').value,
                waist: document.getElementById('m_waist').value,
                cuff: document.getElementById('m_cuff').value,
                step: document.getElementById('m_step').value
            },
            style: {
                neck: document.getElementById('s_neck').value,
                cuff: document.getElementById('s_cuff').value,
                pocket: document.getElementById('s_pocket').value,
                button: document.getElementById('s_button').value
            },
            status: "Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±"
        };

        // Ø§Ù„Ø­ÙØ¸ ÙÙŠ Firebase (Ø¬ÙˆØ¬Ù„)
        db.ref('orders').push(order).then(() => {
            alert("âœ… ØªÙ… Ø­ÙØ¸ Ù…Ù‚Ø§Ø³Ø§ØªÙƒ ÙˆØ·Ù„Ø¨Ùƒ ÙÙŠ Ø³Ø¬Ù„Ø§Øª Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ Ø¨Ù†Ø¬Ø§Ø­!");
            
            // ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨ Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø³Ø±ÙŠØ¹ Ù„Ùƒ
            let text = `*Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ - Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ*%0AØ§Ù„Ø§Ø³Ù…: ${name}%0AØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª ÙÙŠ Ø§Ù„Ø³Ø­Ø§Ø¨.`;
            window.open(`https://wa.me/967773463560?text=${text}`);
        });
    }

    // Ø¬Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¬Ø§Ù‡Ø²Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
    db.ref('products').on('value', snap => {
        const data = snap.val();
        const display = document.getElementById('ready_display');
        if(data) {
            display.innerHTML = "";
            for(let id in data) {
                if(data[id].cat !== 'fabric') {
                    display.innerHTML += `
                    <div class="product-item">
                        <img src="${data[id].img}">
                        <p><b>${data[id].title}</b><br><span style="color:green">${data[id].newP} Ø±ÙŠØ§Ù„</span></p>
                        <button style="background:var(--gold); color:white; border:none; padding:5px 10px; border-radius:5px; cursor:pointer;" onclick="alert('ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©')">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø·Ù„Ø¨</button>
                    </div>`;
                }
            }
        }
    });
</script>
</body>
</html>
