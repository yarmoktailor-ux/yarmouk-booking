<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ Ù„Ù„Ø®ÙŠØ§Ø·Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <style>
        :root {
            --yarmouk-navy: #001F3F;
            --yarmouk-gold: #D4AF37;
            --yarmouk-marble: #F5F5F5;
            --white: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--yarmouk-marble);
            margin: 0;
            color: var(--yarmouk-navy);
        }

        /* Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ø¨ØµØ±ÙŠØ© Ù„Ù„Ù…Ù†ØµØ© */
        .navbar {
            background: var(--yarmouk-navy);
            padding: 20px;
            border-bottom: 3px solid var(--yarmouk-gold);
            text-align: center;
            color: white;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .main-card {
            max-width: 800px;
            margin: 20px auto;
            background: var(--white);
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            overflow: hidden;
            border: 1px solid #eee;
        }

        /* Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª Ø¨Ø§Ù„Ø¨ÙˆØµØ© (Inch System) */
        .measurements-box {
            padding: 25px;
            background: #fff9f0;
            border-top: 5px solid var(--yarmouk-gold);
        }

        .inch-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .inch-input-group label {
            display: block;
            font-size: 13px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .inch-input-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 8px;
            text-align: center;
            font-size: 16px;
        }

        /* Ù…ØªØ¬Ø± Ø§Ù„Ø£Ù‚Ù…Ø´Ø© (Ø£Ù‚Ù…Ø´Ø© Ø±Ø¬Ø§Ù„ÙŠØ© ÙÙ‚Ø·) */
        .fabric-store {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            padding: 20px;
        }

        .fabric-item {
            border: 1px solid #ddd;
            border-radius: 12px;
            overflow: hidden;
            transition: 0.3s;
        }

        .fabric-item:hover {
            border-color: var(--yarmouk-gold);
            transform: translateY(-5px);
        }

        .fabric-item img {
            width: 100%;
            height: 180px;
            object-fit: cover;
        }

        /* Ø¨ÙˆØª ÙŠØ§Ù‚ÙˆØª Ø§Ù„Ø°ÙƒÙŠ */
        #yaqoot-bot {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 2000;
        }

        .bot-trigger {
            background: var(--yarmouk-navy);
            color: var(--yarmouk-gold);
            border: 2px solid var(--yarmouk-gold);
            padding: 15px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .bot-window {
            display: none;
            width: 300px;
            height: 400px;
            background: white;
            border: 2px solid var(--yarmouk-gold);
            border-radius: 15px;
            position: absolute;
            bottom: 70px;
            left: 0;
            flex-direction: column;
        }

        .btn-primary {
            background: var(--yarmouk-navy);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 18px;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
        }
    </style>
</head>
<body>

<div class="navbar">
    <h1 style="margin:0; letter-spacing: 2px;">Ø§Ù„Ù€ÙŠÙ€Ø±Ù…Ù€ÙˆÙƒ Ù„Ù„Ù€Ø®Ù€ÙŠÙ€Ø§Ø·Ù€Ø© ÙˆØ§Ù„Ù€Ø£Ù‚Ù€Ù…Ù€Ø´Ù€Ø©</h1>
    <p style="font-size: 12px; opacity: 0.8;">Ø¥Ø±Ø« Ù…Ù† Ø§Ù„Ø¯Ù‚Ø©.. Ù…Ù†Ø° 2002</p>
</div>

<div class="main-card">
    <div style="padding: 20px; display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
        <input type="text" id="custName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„ÙƒØ§Ù…Ù„" style="padding:12px; border-radius:8px; border:1px solid #ddd;">
        <input type="tel" id="custPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„" style="padding:12px; border-radius:8px; border:1px solid #ddd;">
    </div>

    <div class="measurements-box">
        <h3 style="margin-top:0;"><img src="https://cdn-icons-png.flaticon.com/512/3406/3406950.png" width="20"> Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª (Ø¨Ø§Ù„Ø¨ÙˆØµØ© / Inch)</h3>
        <div class="inch-grid">
            <div class="inch-input-group">
                <label>Ø§Ù„Ø·ÙˆÙ„</label>
                <input type="number" step="0.1" id="m_length" placeholder="00.0">
            </div>
            <div class="inch-input-group">
                <label>Ø§Ù„ÙƒØªÙ</label>
                <input type="number" step="0.1" id="m_shoulder" placeholder="00.0">
            </div>
            <div class="inch-input-group">
                <label>Ø§Ù„ÙŠØ¯ (Ø§Ù„ÙƒÙ…)</label>
                <input type="number" step="0.1" id="m_hand" placeholder="00.0">
            </div>
            <div class="inch-input-group">
                <label>Ø§Ù„ØµØ¯Ø±</label>
                <input type="number" step="0.1" id="m_chest" placeholder="00.0">
            </div>
        </div>
    </div>

    <div style="padding:20px;">
        <h3>ğŸ‘‘ Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ù‚Ù…Ø§Ø´</h3>
        <div class="fabric-store" id="fabricList">
            </div>
    </div>

    <div style="padding: 20px; background: #eee; text-align: center;">
        <button class="btn-primary" onclick="submitOrder()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ­ÙØ¸ Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª</button>
    </div>
</div>

<div id="yaqoot-bot">
    <div class="bot-window" id="botWindow">
        <div style="background:var(--yarmouk-navy); color:white; padding:15px; border-radius:12px 12px 0 0;">ÙŠØ§Ù‚ÙˆØª Ø§Ù„Ø°ÙƒÙŠ</div>
        <div id="chatContent" style="padding:15px; flex:1; font-size:14px; overflow-y:auto;">
            Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ! Ø£Ù†Ø§ Ø®Ø¨ÙŠØ± Ø§Ù„Ø£Ù†Ø§Ù‚Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØŒ ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø§Ø®ØªÙŠØ§Ø± Ù‚Ù…Ø§Ø´Ùƒ Ø§Ù„ÙŠÙˆÙ…ØŸ
        </div>
        <div style="padding:10px; border-top:1px solid #eee;">
            <input type="text" id="botInput" placeholder="Ø§Ø³Ø£Ù„ ÙŠØ§Ù‚ÙˆØª..." style="width:75%; padding:8px; border:1px solid #ddd; border-radius:5px;">
            <button onclick="askYaqoot()" style="background:var(--yarmouk-gold); border:none; padding:8px; border-radius:5px; cursor:pointer;">Ø§Ø±Ø³Ù„</button>
        </div>
    </div>
    <div class="bot-trigger" onclick="toggleBot()">âœ¨ Ø§Ø³Ø£Ù„ ÙŠØ§Ù‚ÙˆØª</div>
</div>

<script>
    // 1. Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Firebase)
    const firebaseConfig = { databaseURL: "https://alyarmok-store-default-rtdb.firebaseio.com/" };
    if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // 2. ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù‚Ù…Ø´Ø© (Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø© Ù…Ù† Ø§Ù„Ø£ÙˆØ§Ù…Ø±)
    const fabrics = [
        { name: "Ù‚Ø·Ù† ÙŠØ§Ø¨Ø§Ù†ÙŠ Ø³Ù„Ùƒ", price: 350, img: "https://images.unsplash.com/photo-1594938298603-c8148c4dae35?q=80&w=400" },
        { name: "Ø³Ù…ÙŠØ±Ø§Ù…ÙŠØ³ Ø§Ù„Ø£ØµÙ„ÙŠ", price: 420, img: "https://images.unsplash.com/photo-1521572267360-ee0c2909d518?q=80&w=400" }
    ];

    function loadFabrics() {
        const list = document.getElementById('fabricList');
        list.innerHTML = fabrics.map(f => `
            <div class="fabric-item">
                <img src="${f.img}">
                <div style="padding:10px; text-align:center;">
                    <h4 style="margin:5px 0;">${f.name}</h4>
                    <p style="color:green; font-weight:bold;">${f.price} Ø±ÙŠØ§Ù„</p>
                    <button style="background:var(--yarmouk-gold); border:none; padding:5px 10px; border-radius:5px; cursor:pointer;">Ø§Ø®ØªÙŠØ§Ø±</button>
                </div>
            </div>
        `).join('');
    }
    loadFabrics();

    // 3. Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ (ÙŠØ§Ù‚ÙˆØª)
    function toggleBot() {
        const win = document.getElementById('botWindow');
        win.style.display = win.style.display === 'flex' ? 'none' : 'flex';
    }

    function askYaqoot() {
        const input = document.getElementById('botInput').value;
        const content = document.getElementById('chatContent');
        if (input.includes("ØµÙŠÙÙŠ")) {
            content.innerHTML += `<p><b>Ø£Ù†Øª:</b> ${input}</p><p style="color:var(--yarmouk-gold)"><b>ÙŠØ§Ù‚ÙˆØª:</b> Ø£Ù†ØµØ­Ùƒ Ø¨Ø§Ù„Ù‚Ø·Ù† Ø§Ù„ÙŠØ§Ø¨Ø§Ù†ÙŠ "ØªÙˆÙŠÙˆØ¨Ùˆ"ØŒ ÙÙ‡Ùˆ Ø¨Ø§Ø±Ø¯ Ø¬Ø¯Ø§Ù‹ ÙˆÙ…Ù†Ø§Ø³Ø¨ Ù„Ø£Ø¬ÙˆØ§Ø¡Ù†Ø§.</p>`;
        } else {
            content.innerHTML += `<p><b>Ø£Ù†Øª:</b> ${input}</p><p style="color:var(--yarmouk-gold)"><b>ÙŠØ§Ù‚ÙˆØª:</b> Ø·Ù„Ø¨Ùƒ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©ØŒ Ù†Ø­Ù† Ù‡Ù†Ø§ Ù„Ø¶Ù…Ø§Ù† Ù‡ÙŠØ¨ØªÙƒ!</p>`;
        }
        document.getElementById('botInput').value = "";
    }

    // 4. Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
    function submitOrder() {
        const name = document.getElementById('custName').value;
        const phone = document.getElementById('custPhone').value;
        const length = document.getElementById('m_length').value;

        if(!name || !phone || !length) {
            alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ù…Ù‚Ø§Ø³Ø§Øª Ø¨Ø§Ù„Ø¨ÙˆØµØ© Ø£ÙˆÙ„Ø§Ù‹");
            return;
        }

        const orderData = {
            name, phone, 
            measurements: { length, shoulder: document.getElementById('m_shoulder').value },
            timestamp: new Date().toISOString()
        };

        db.ref('orders').push(orderData).then(() => {
            alert("ØªÙ… Ø­ÙØ¸ Ù…Ù‚Ø§Ø³Ø§ØªÙƒ ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­ Ø¥Ù„Ù‰ Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ!");
        });
    }
</script>

</body>
</html>
