<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ Ù„Ù„Ø®ÙŠØ§Ø·Ø©</title>
    <style>
        :root { --gold: #d4af37; --brown: #5d4037; --bg: #fdfbf7; --white: #ffffff; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: var(--bg); margin: 0; padding: 10px; direction: rtl; }
        .main-container { max-width: 600px; margin: auto; background: var(--white); border-radius: 20px; border: 1px solid var(--gold); box-shadow: 0 10px 30px rgba(0,0,0,0.1); overflow: hidden; }
        .header { text-align: center; padding: 20px; background: var(--brown); color: white; }
        .section { padding: 15px; display: none; }
        .section.active { display: block; }
        .tab-nav { display: flex; background: #eee; border-bottom: 2px solid var(--gold); }
        .tab-nav button { flex: 1; padding: 15px; border: none; cursor: pointer; font-weight: bold; font-size: 14px; }
        .tab-nav button.active { background: var(--gold); color: white; }
        .input-group { margin-bottom: 10px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; color: var(--brown); font-size: 13px; }
        input, select, textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        .measure-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; background: #f9f9f9; padding: 10px; border-radius: 10px; }
        .measure-grid div { text-align: center; }
        .measure-grid input { padding: 5px; text-align: center; }
        .btn-main { width: 100%; padding: 15px; background: var(--brown); color: white; border: none; border-radius: 12px; font-size: 16px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .order-card { background: white; border: 1px solid #ddd; padding: 10px; border-radius: 10px; margin-bottom: 10px; border-right: 5px solid var(--gold); }
        .badge { background: var(--gold); color: white; padding: 2px 8px; border-radius: 10px; font-size: 11px; }
    </style>
</head>
<body>

<div class="main-container">
    <div class="header">
        <h2 style="margin:0;">Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ Ù„Ù„Ø®ÙŠØ§Ø·Ø© ÙˆØ§Ù„Ø¬Ø§Ù‡Ø²</h2>
        <div style="font-size: 12px;">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙˆØ§Ù„Ù…Ù‚Ø§Ø³Ø§Øª</div>
    </div>

    <div class="tab-nav">
        <button class="active" onclick="switchTab('new_order')">Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯</button>
        <button onclick="switchTab('orders_log')">Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</button>
        <button onclick="switchTab('settings')">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ù‚Ù…Ø´Ø©</button>
    </div>

    <div id="new_order" class="section active">
        <div class="input-group">
            <label>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„:</label>
            <input type="text" id="cust_name" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø¹Ù„ÙŠ Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ">
        </div>
        <div class="input-group">
            <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</label>
            <input type="tel" id="cust_phone" placeholder="777XXXXXX">
        </div>

        <hr>
        <label>ğŸ“ Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª (Ø¨Ø§Ù„Ù‡Ù†Ø´):</label>
        <div class="measure-grid">
            <div><label>Ø·ÙˆÙ„</label><input type="number" step="0.1" class="m-in"></div>
            <div><label>ÙƒØªÙ</label><input type="number" step="0.1" class="m-in"></div>
            <div><label>ÙŠØ¯</label><input type="number" step="0.1" class="m-in"></div>
            <div><label>ØµØ¯Ø±</label><input type="number" step="0.1" class="m-in"></div>
            <div><label>Ø±Ù‚Ø¨Ø©</label><input type="number" step="0.1" class="m-in"></div>
            <div><label>ÙˆØ³Ø·</label><input type="number" step="0.1" class="m-in"></div>
            <div><label>ÙƒØ¨Ùƒ</label><input type="number" step="0.1" class="m-in"></div>
            <div><label>Ø®Ø·ÙˆØ©</label><input type="number" step="0.1" class="m-in"></div>
        </div>

        <hr>
        <div class="input-group">
            <label>ğŸ¨ Ù„ÙˆÙ† Ø§Ù„Ù‚Ù…Ø§Ø´ ÙˆØªÙØ§ØµÙŠÙ„Ù‡:</label>
            <input type="text" id="fabric_detail" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø£Ø¨ÙŠØ¶ - ÙŠØ§Ø¨Ø§Ù†ÙŠ">
        </div>
        <div class="input-group">
            <label>âœ‚ï¸ Ù†ÙˆØ¹ Ø§Ù„Ø®ÙŠØ§Ø·Ø© ÙˆØ§Ù„ØªÙØ§ØµÙŠÙ„:</label>
            <textarea id="tailor_style" rows="2" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø±Ù‚Ø¨Ø© Ù‚Ù„Ø§Ø¨ØŒ ÙƒØ¨Ùƒ Ù‚Ù…Ø§Ø´ØŒ Ø³Ø­Ø§Ø¨ Ù…Ø®ÙÙŠ"></textarea>
        </div>

        <div class="input-group">
            <label>ğŸ›ï¸ Ù…Ù„Ø§Ø¨Ø³ Ø¬Ø§Ù‡Ø²Ø© Ù…Ø¶Ø§ÙØ© (Ø¥Ù† ÙˆØ¬Ø¯):</label>
            <input type="text" id="ready_items" placeholder="Ù…Ø«Ù„Ø§Ù‹: ÙƒÙˆØª Ø´ØªÙˆÙŠØŒ Ø´Ø§Ù„ ØµÙˆÙ">
        </div>

        <div class="input-group">
            <label>ğŸ’° Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</label>
            <input type="number" id="total_price" placeholder="0.00">
        </div>

        <button class="btn-main" onclick="saveNewOrder()">Ø­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨ ÙÙŠ Ø§Ù„Ø³Ø¬Ù„ âœ…</button>
    </div>

    <div id="orders_log" class="section">
        <h3 style="color:var(--brown)">Ø¢Ø®Ø± Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø³Ø¬Ù„Ø©:</h3>
        <div id="log_container"></div>
        <button onclick="exportOrders()" style="width:100%; margin-top:10px; background:#28a745; color:white; border:none; padding:10px; border-radius:8px;">ğŸ“¥ ØªØµØ¯ÙŠØ± Ø§Ù„Ø³Ø¬Ù„ (Backup)</button>
    </div>

    <div id="settings" class="section">
        <div style="background:#f0f0f0; padding:20px; border-radius:15px; text-align:center;">
            <h4>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</h4>
            <p>ÙŠÙ…ÙƒÙ†Ùƒ Ù‡Ù†Ø§ Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„ Ø£Ùˆ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù‚Ø¯ÙŠÙ…Ø©.</p>
            <button onclick="clearAllData()" style="background:red; color:white; border:none; padding:10px; border-radius:8px;">âš ï¸ Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</button>
        </div>
    </div>
</div>

<script>
    let db_orders = JSON.parse(localStorage.getItem('yarmouk_orders_v2')) || [];

    function switchTab(tabId) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.tab-nav button').forEach(b => b.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        event.currentTarget.classList.add('active');
        if(tabId === 'orders_log') renderOrders();
    }

    function saveNewOrder() {
        const name = document.getElementById('cust_name').value;
        const phone = document.getElementById('cust_phone').value;
        const measurements = Array.from(document.querySelectorAll('.m-in')).map(i => i.value || '0');
        
        if(!name) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„");

        const order = {
            id: Date.now(),
            name: name,
            phone: phone,
            measures: measurements,
            fabric: document.getElementById('fabric_detail').value,
            style: document.getElementById('tailor_style').value,
            ready: document.getElementById('ready_items').value,
            total: document.getElementById('total_price').value,
            date: new Date().toLocaleString('ar-YE')
        };

        db_orders.unshift(order);
        localStorage.setItem('yarmouk_orders_v2', JSON.stringify(db_orders));
        alert("ØªÙ… Ø­ÙØ¸ Ø·Ù„Ø¨ Ø§Ù„Ø¹Ù…ÙŠÙ„ " + name + " Ø¨Ù†Ø¬Ø§Ø­!");
        resetForm();
    }

    function renderOrders() {
        const container = document.getElementById('log_container');
        container.innerHTML = db_orders.map(o => `
            <div class="order-card">
                <div style="display:flex; justify-content:space-between;">
                    <strong>ğŸ‘¤ ${o.name}</strong>
                    <span class="badge">${o.date}</span>
                </div>
                <div style="font-size:12px; margin-top:5px;">
                    ğŸ“ ${o.phone} | ğŸ’° ${o.total} Ø±ÙŠØ§Ù„<br>
                    ğŸ¨ Ø§Ù„Ù‚Ù…Ø§Ø´: ${o.fabric || 'Ù„Ù… ÙŠØ­Ø¯Ø¯'}<br>
                    ğŸ›ï¸ Ø§Ù„Ø¬Ø§Ù‡Ø²: ${o.ready || 'Ù„Ø§Ø´ÙŠØ¡'}
                </div>
                <details style="margin-top:10px; font-size:11px; background:#f9f9f9; padding:5px;">
                    <summary style="cursor:pointer; color:var(--gold)">Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª ÙˆØ§Ù„ØªÙØ§ØµÙŠÙ„</summary>
                    <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:5px;">
                        <div><strong>Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª:</strong><br>Ø·ÙˆÙ„:${o.measures[0]}, ÙƒØªÙ:${o.measures[1]}, ÙŠØ¯:${o.measures[2]}, ØµØ¯Ø±:${o.measures[3]}...</div>
                        <div><strong>Ø§Ù„ØªÙØ§ØµÙŠÙ„:</strong><br>${o.style || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªÙØ§ØµÙŠÙ„'}</div>
                    </div>
                </details>
            </div>
        `).join('') || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹.';
    }

    function resetForm() {
        document.querySelectorAll('input, textarea').forEach(i => i.value = '');
    }

    function clearAllData() {
        if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§ØªØŸ")) {
            localStorage.removeItem('yarmouk_orders_v2');
            db_orders = [];
            renderOrders();
        }
    }

    function exportOrders() {
        const blob = new Blob([JSON.stringify(db_orders)], {type: "application/json"});
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = "Ø³Ø¬Ù„_Ø·Ù„Ø¨Ø§Øª_Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ.json";
        a.click();
    }
</script>

</body>
</html>
