<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام اليرموك للخياطة - قاعدة البيانات</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root { --gold: #d4af37; --brown: #5d4037; --bg: #fdfbf7; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); margin: 0; padding: 10px; direction: rtl; }
        .app-card { max-width: 500px; margin: auto; background: white; border-radius: 15px; border: 1px solid var(--gold); overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .header { background: #fff; text-align: center; padding: 15px; border-bottom: 2px solid var(--gold); }
        .tabs { display: flex; background: #f0f0f0; }
        .tab-btn { flex: 1; padding: 12px; border: none; cursor: pointer; font-weight: bold; }
        .tab-btn.active { background: var(--gold); color: white; }
        .content { padding: 15px; display: none; }
        .content.active { display: block; }
        .input-group { margin-bottom: 10px; }
        .input-group input, .input-group select { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        .measures-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; background: #fff9eb; padding: 10px; border-radius: 10px; }
        .measures-grid input { width: 100%; text-align: center; padding: 8px; border: 1px solid #ccc; border-radius: 5px; }
        .order-btn { width: 100%; padding: 15px; background: var(--brown); color: white; border: none; border-radius: 10px; font-size: 16px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .payment-box { background: #e8f5e9; padding: 10px; border-radius: 10px; border: 1px solid #2e7d32; margin-top: 10px; font-size: 13px; }
    </style>
</head>
<body>

<div class="app-card">
    <div class="header">
        <h3 style="margin:0; color:var(--brown)">اليرموك للخياطة - طلب جديد</h3>
    </div>

    <div class="tabs">
        <button class="tab-btn active" id="tab1" onclick="showTab('tailor')">تفصيل جديد</button>
        <button class="tab-btn" id="tab2" onclick="showTab('ready')">ثياب جاهزة</button>
    </div>

    <div id="tailor" class="content active">
        <div class="input-group">
            <input type="text" id="cust_name" placeholder="اسم العميل الكامل">
        </div>
        <div class="input-group">
            <input type="tel" id="cust_phone" placeholder="رقم الهاتف">
        </div>

        <p style="font-weight:bold; font-size:14px; margin: 10px 0 5px;">المقاسات (هنش):</p>
        <div class="measures-grid">
            <input type="number" id="m_length" placeholder="طول">
            <input type="number" id="m_shoulder" placeholder="كتف">
            <input type="number" id="m_hand" placeholder="يد">
            <input type="number" id="m_chest" placeholder="صدر">
            <input type="number" id="m_neck" placeholder="رقبة">
            <input type="number" id="m_waist" placeholder="وسط">
            <input type="number" id="m_cuff" placeholder="كبك">
            <input type="number" id="m_step" placeholder="خطوة">
        </div>

        <p style="font-weight:bold; font-size:14px; margin: 15px 0 5px;">تفاصيل الخياطة:</p>
        <div class="measures-grid" style="grid-template-columns: 1fr 1fr;">
            <select id="s_neck"><option>رقبة قلاب</option><option>رقبة سادة</option></select>
            <select id="s_pocket"><option>جيب مخفي</option><option>جيب ظاهر</option></select>
            <select id="s_cuff"><option>كبك مربع</option><option>سادة (بدون كبك)</option></select>
            <select id="s_button"><option>زراير مخفي</option><option>زراير ظاهر</option></select>
        </div>

        <div class="payment-box">
            <b>حسابات الدفع:</b><br>
            كريمي: 12345678 | جوالي: 773463560
        </div>

        <button class="order-btn" onclick="saveOrder()">تأكيد وحفظ الطلب سحابياً</button>
    </div>

    <div id="ready" class="content">
        <p style="text-align:center; color:#888;">سيتم عرض الثياب والأكوات والشيلان الجاهزة هنا من قاعدة البيانات.</p>
        <div id="ready_list"></div>
    </div>
</div>

<script>
    // إعدادات Firebase الخاصة بك (من الصورة التي أرفقتها)
    const firebaseConfig = {
        databaseURL: "https://alyarmok-store-default-rtdb.firebaseio.com"
    };
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    function showTab(tabId) {
        document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    function saveOrder() {
        const name = document.getElementById('cust_name').value;
        const phone = document.getElementById('cust_phone').value;

        if(!name || !phone) { alert("لطفاً أدخل الاسم والهاتف"); return; }

        const orderData = {
            customer: name,
            phone: phone,
            timestamp: new Date().toLocaleString(),
            measures: {
                length: document.getElementById('m_length').value,
                shoulder: document.getElementById('m_shoulder').value,
                hand: document.getElementById('m_hand').value,
                chest: document.getElementById('m_chest').value,
                neck: document.getElementById('m_neck').value,
                waist: document.getElementById('m_waist').value,
                cuff: document.getElementById('m_cuff').value,
                step: document.getElementById('m_step').value
            },
            style: {
                neck: document.getElementById('s_neck').value,
                pocket: document.getElementById('s_pocket').value,
                cuff: document.getElementById('s_cuff').value,
                button: document.getElementById('s_button').value
            }
        };

        // الحفظ في قاعدة بيانات Google Firebase
        database.ref('orders').push(orderData).then(() => {
            alert("✅ تم حفظ الطلب في قاعدة بيانات اليرموك بنجاح!");
            // مسح الحقول بعد الحفظ
            document.querySelectorAll('input').forEach(i => i.value = "");
        }).catch((error) => {
            alert("خطأ في الاتصال: " + error.message);
        });
    }
</script>
</body>
</html>
