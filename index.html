<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø®ÙŠØ§Ø·Ø© Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ - Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„</title>
    <style>
        :root { --gold: #d4af37; --brown: #5d4037; --bg: #fdfbf7; --green: #28a745; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: var(--bg); direction: rtl; padding: 10px; margin: 0; }
        .container { background: white; max-width: 800px; margin: auto; padding: 15px; border-radius: 20px; border: 1px solid var(--gold); box-shadow: 0 5px 25px rgba(0,0,0,0.1); }
        
        /* Ø§Ù„Ù‡ÙŠØ¯Ø± ÙˆØ§Ù„ØªÙ†Ù‚Ù„ */
        .header { text-align: center; padding: 15px; border-bottom: 2px solid var(--gold); }
        .logo { width: 100px; }
        .nav-icons { display: flex; justify-content: space-around; background: #fff; padding: 10px; margin: 15px 0; border-radius: 15px; border: 1px solid #eee; position: sticky; top: 5px; z-index: 100; }
        .nav-item { text-align: center; cursor: pointer; flex: 1; opacity: 0.5; transition: 0.3s; }
        .nav-item.active { opacity: 1; transform: scale(1.1); color: var(--gold); font-weight: bold; }
        .nav-item img { width: 35px; height: 35px; display: block; margin: auto; }

        .section { display: none; animation: fadeIn 0.4s; }
        .section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Ø§Ù„Ø£Ù‚Ù…Ø´Ø© ÙˆØ§Ù„ØªÙØµÙŠÙ„ */
        .fabric-card { border: 1px solid #eee; border-radius: 15px; padding: 10px; margin-bottom: 15px; background: #fff; }
        .fabric-img { width: 100%; height: 180px; object-fit: cover; border-radius: 10px; background: #f9f9f9; }
        .grid-measure { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin: 15px 0; }
        .grid-measure input { width: 100%; padding: 8px; text-align: center; border: 1px solid #ddd; border-radius: 5px; font-size: 13px; }
        .grid-measure label { font-size: 10px; display: block; color: #777; margin-bottom: 2px; }

        /* ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªØµÙ…ÙŠÙ… */
        .design-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; background: #f9f6f0; padding: 10px; border-radius: 10px; margin-top: 10px; }
        select, input { width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #ddd; margin-top: 5px; box-sizing: border-box; font-size: 14px; }

        /* Ù‚Ø³Ù… Ø§Ù„Ø¬Ø§Ù‡Ø² */
        .ready-tabs { display: flex; gap: 5px; margin-bottom: 15px; }
        .tab-btn { flex: 1; padding: 10px; border: 1px solid var(--gold); border-radius: 10px; background: #fff; cursor: pointer; font-size: 12px; }
        .tab-btn.active { background: var(--gold); color: white; }
        .product-card { border: 1px solid #eee; border-radius: 15px; margin-bottom: 15px; overflow: hidden; background: #fff; }
        .product-img { width: 100%; height: 250px; object-fit: cover; }
        .p-info { padding: 12px; }
        .old-price { text-decoration: line-through; color: #999; font-size: 14px; }
        .new-price { color: var(--green); font-weight: bold; font-size: 18px; margin-right: 10px; }

        /* Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª */
        .total-banner { background: var(--brown); color: white; padding: 15px; border-radius: 15px; text-align: center; margin-top: 20px; }
        .admin-trigger { position: fixed; bottom: 20px; left: 20px; background: rgba(0,0,0,0.1); border: none; width: 40px; height: 40px; border-radius: 50%; z-index: 1000; cursor: pointer; }
    </style>
</head>
<body>

<button class="admin-trigger" onclick="openAdmin()">âš™ï¸</button>

<div class="container">
    <div class="header">
        <img src="https://i.imgur.com/eBfP6XG.png" class="logo" alt="Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ">
        <h2 style="margin:0; color:var(--brown)">Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ Ù„Ù„Ø®ÙŠØ§Ø·Ø© ÙˆØ§Ù„Ù…Ù„Ø§Ø¨Ø³ Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©</h2>
    </div>

    <div class="nav-icons">
        <div class="nav-item active" onclick="showSec('tailor_sec')"><img src="https://i.imgur.com/eBfP6XG.png"><div>Ø§Ù„ØªÙØµÙŠÙ„</div></div>
        <div class="nav-item" onclick="showSec('ready_sec')"><img src="https://i.imgur.com/eBfP6XG.png"><div>Ø§Ù„Ø¬Ø§Ù‡Ø²</div></div>
        <div class="nav-item" onclick="showSec('info_sec')"><img src="https://i.imgur.com/eBfP6XG.png"><div>ØªÙˆØ§ØµÙ„</div></div>
    </div>

    <form id="mainOrderForm">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
            <input type="text" id="cust_name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„" required>
            <input type="tel" id="cust_phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„" required>
        </div>

        <div id="tailor_sec" class="section active">
            <h3 style="color:var(--brown)">ğŸ§µ ØªÙØµÙŠÙ„ Ø¬Ø¯ÙŠØ¯ (Ø§Ù„Ù…Ù‚Ø§Ø³ Ø¨Ø§Ù„Ù‡Ù†Ø´)</h3>
            <div id="tailor_items"></div>
            <button type="button" onclick="addTailorItem()" style="width:100%; padding:15px; background:var(--gold); color:white; border:none; border-radius:10px; font-weight:bold; cursor:pointer">+ Ø¥Ø¶Ø§ÙØ© Ø«ÙˆØ¨ ØªÙØµÙŠÙ„ Ø¬Ø¯ÙŠØ¯</button>
            <div style="text-align:center; padding:10px; font-weight:bold;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙØµÙŠÙ„: <span id="t_total">0</span> Ø±ÙŠØ§Ù„</div>
        </div>

        <div id="ready_sec" class="section">
            <div class="ready-tabs">
                <button type="button" class="tab-btn active" onclick="filterReady('all')">Ø§Ù„ÙƒÙ„</button>
                <button type="button" class="tab-btn" onclick="filterReady('thobe')">Ø«ÙŠØ§Ø¨</button>
                <button type="button" class="tab-btn" onclick="filterReady('coat')">Ø£ÙƒÙˆØ§Øª</button>
                <button type="button" class="tab-btn" onclick="filterReady('shawl')">Ø´ÙŠÙ„Ø§Ù†</button>
            </div>
            <div id="ready_display">
                </div>
            <div style="text-align:center; padding:10px; font-weight:bold;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¬Ø§Ù‡Ø²: <span id="r_total">0</span> Ø±ÙŠØ§Ù„</div>
        </div>

        <div id="info_sec" class="section">
            <h3 style="text-align:center">Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h3>
            <a href="https://wa.me/967773463560" style="display:block; padding:15px; background:#25D366; color:white; text-align:center; border-radius:10px; text-decoration:none; margin-bottom:10px;">ÙˆØ§ØªØ³Ø§Ø¨ 1: 773463560</a>
            <a href="https://wa.me/967776090624" style="display:block; padding:15px; background:#128C7E; color:white; text-align:center; border-radius:10px; text-decoration:none;">ÙˆØ§ØªØ³Ø§Ø¨ 2: 776090624</a>
        </div>

        <div class="total-banner">
            <div>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ Ø§Ù„Ù…Ø³ØªØ­Ù‚</div>
            <div style="font-size:28px; font-weight:bold;"><span id="grand_total">0</span> Ø±ÙŠØ§Ù„</div>
        </div>

        <div style="background:#fff9eb; padding:15px; border-radius:10px; margin-top:15px; border:1px dashed var(--gold);">
            <small>Ø§Ù„ÙƒØ±ÙŠÙ…ÙŠ: 3005374854 | Ø¬ÙŠØ¨: 80617</small>
            <input type="file" required style="font-size:12px;">
        </div>

        <button type="button" onclick="sendOrder()" style="width:100%; padding:20px; background:var(--brown); color:white; border:none; border-radius:15px; font-size:20px; font-weight:bold; margin-top:15px; cursor:pointer">ØªØ£ÙƒÙŠØ¯ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
    </form>
</div>

<div id="adminPanel" style="display:none; position:fixed; top:10%; left:5%; right:5%; background:#222; color:white; pading:20px; border-radius:20px; z-index:2000; padding:20px; border:2px solid var(--gold)">
    <h4>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ (Ø±ÙØ¹ ØµÙˆØ±)</h4>
    <select id="adm_cat"><option value="thobe">Ø«ÙŠØ§Ø¨ Ø¬Ø§Ù‡Ø²Ø©</option><option value="coat">Ø£ÙƒÙˆØ§Øª</option><option value="shawl">Ø´ÙŠÙ„Ø§Ù†</option></select>
    <input type="file" id="adm_file" onchange="previewImg(this)">
    <input type="text" id="adm_name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ ÙˆØ§Ù„ÙˆØµÙ">
    <input type="number" id="adm_old" placeholder="Ø§Ù„Ø³Ø¹Ø± Ù‚Ø¨Ù„ Ø§Ù„Ø®ØµÙ…">
    <input type="number" id="adm_new" placeholder="Ø§Ù„Ø³Ø¹Ø± Ø¨Ø¹Ø¯ Ø§Ù„Ø®ØµÙ…">
    <button onclick="uploadToN8N()" style="width:100%; padding:10px; background:var(--green); color:white; border:none; margin-top:10px; border-radius:10px;">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¹Ø±Ø¶ Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡</button>
    <button onclick="document.getElementById('adminPanel').style.display='none'" style="width:100%; background:red; border:none; color:white; margin-top:5px; border-radius:10px;">Ø¥ØºÙ„Ø§Ù‚</button>
</div>

<script>
    const n8n = 'https://ali991278.app.n8n.cloud/webhook/e4bcc169-93c0-42c5-8226-528f3c6a72e3';
    let readyCart = {};
    let base64 = "";

    function openAdmin() { if(prompt("Ø±Ù…Ø² Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:") === "1234") document.getElementById('adminPanel').style.display='block'; }
    function previewImg(input) { let r = new FileReader(); r.onload = (e) => base64 = e.target.result; r.readAsDataURL(input.files[0]); }
    
    async function uploadToN8N() {
        let d = { action: "upload", cat: document.getElementById('adm_cat').value, name: document.getElementById('adm_name').value, old: document.getElementById('adm_old').value, new: document.getElementById('adm_new').value, img: base64 };
        await fetch(n8n, { method: 'POST', body: JSON.stringify(d) });
        alert("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆÙ‚Ø¹!"); location.reload();
    }

    function showSec(id) {
        document.querySelectorAll('.section, .nav-item').forEach(el => el.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    function addTailorItem() {
        const div = document.createElement('div');
        div.className = 'fabric-card';
        div.innerHTML = `
            <div style="display:flex; justify-content:space-between"><b>Ø«ÙˆØ¨ ØªÙØµÙŠÙ„ Ø¬Ø¯ÙŠØ¯</b><button type="button" onclick="this.parentElement.parentElement.remove(); calc();" style="color:red; background:none; border:none;">Ø­Ø°Ù</button></div>
            <select class="f_select" onchange="calc()">
                <option value="0">-- Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ù‚Ù…Ø§Ø´ --</option>
                <option value="20000">ÙŠØ§Ø¨Ø§Ù†ÙŠ (20,000 Ø±ÙŠØ§Ù„) - ÙØ§Ø®Ø± ÙˆØ¨Ø§Ø±Ø¯</option>
                <option value="25000">ÙŠØ§Ø¨Ø§Ù†ÙŠ ØªØªØ±ÙƒØ³ (25,000 Ø±ÙŠØ§Ù„) - Ø±Ø³Ù…ÙŠ ÙˆÙ‚ÙˆÙŠ</option>
                <option value="18000">ØªÙŠÙ„Ø§Ù†Ø¯ÙŠ Ø®ÙŠÙˆØ· ÙŠØ§Ø¨Ø§Ù†ÙŠØ© (18,000 Ø±ÙŠØ§Ù„)</option>
                <option value="17000">ÙƒÙˆØ±ÙŠ Ù„Ù…Ø§Ø¹ ØªØªØ±ÙƒØ³ (17,000 Ø±ÙŠØ§Ù„)</option>
                <option value="12000">Ø±ØªØ´ÙŠ Ø§Ù†Ø¯Ù†ÙˆØ³ÙŠ (14,000 Ø±ÙŠØ§Ù„)</option>
                <option value="12000">Ø´ØªÙˆÙŠ Ù‡Ù†Ø¯ÙŠ (12,000 Ø±ÙŠØ§Ù„)</option>
            </select>
            <div class="grid-measure">
                <div><label>Ø·ÙˆÙ„</label><input type="number" step="0.1" placeholder="0.0"></div>
                <div><label>ÙƒØªÙ</label><input type="number" step="0.1" placeholder="0.0"></div>
                <div><label>ÙŠØ¯</label><input type="number" step="0.1" placeholder="0.0"></div>
                <div><label>ØµØ¯Ø±</label><input type="number" step="0.1" placeholder="0.0"></div>
                <div><label>Ø±Ù‚Ø¨Ø©</label><input type="number" step="0.1" placeholder="0.0"></div>
                <div><label>ÙˆØ³Ø· ÙŠØ¯</label><input type="number" step="0.1" placeholder="0.0"></div>
                <div><label>ÙƒØ¨Ùƒ</label><input type="number" step="0.1" placeholder="0.0"></div>
                <div><label>Ø®Ø·ÙˆØ©</label><input type="number" step="0.1" placeholder="0.0"></div>
            </div>
            <div class="design-grid">
                <select><option disabled selected>Ù†ÙˆØ¹ Ø§Ù„Ø±Ù‚Ø¨Ø©</option><option>Ù‚Ù„Ø§Ø¨ Ù…Ù„ÙƒÙŠ</option><option>Ù‚Ù„Ø§Ø¨ ÙØ±Ù†Ø³ÙŠ</option><option>Ù‚Ù„Ø§Ø¨ Ø¯Ø§Ø¦Ø±ÙŠ</option><option>Ø³Ø§Ø¯Ø© Ù…Ø±Ø¨Ø¹</option><option>Ø³Ø§Ø¯Ø© Ø¯Ø§Ø¦Ø±ÙŠ</option><option>ØµÙŠÙ†ÙŠ</option></select>
                <select><option disabled selected>Ù†ÙˆØ¹ Ø§Ù„ÙƒØ¨Ùƒ</option><option>ÙƒØ¨Ùƒ Ù‚Ù…Ø§Ø´</option><option>ÙƒØ¨Ùƒ Ø­Ø´Ùˆ Ù…Ø±Ø¨Ø¹</option><option>ÙƒØ¨Ùƒ Ø­Ø´Ùˆ Ø¯Ø§Ø¦Ø±ÙŠ</option><option>Ø³Ø§Ø¯Ø© Ø¨Ø¯ÙˆÙ† Ø²Ø±Ø§Ø±</option></select>
                <select><option disabled selected>Ø§Ù„Ø¬Ø¨Ø²ÙˆØ±</option><option>ÙƒØ¨Ø³ Ø¸Ø§Ù‡Ø±</option><option>ÙƒØ¨Ø³ Ù…Ø®ÙÙŠ</option><option>Ø²Ø±Ø§Ø± Ù…Ø®ÙÙŠ</option><option>Ø³Ø­Ø§Ø¨</option></select>
                <select><option disabled selected>Ù†ÙˆØ¹ Ø§Ù„Ø®ÙŠØ§Ø·</option><option>Ù‚Ø·Ø±ÙŠ</option><option>Ø³Ø¹ÙˆØ¯ÙŠ</option><option>Ø­Ø¬Ø§Ø²ÙŠ</option><option>Ø¹Ù…Ø§Ù†ÙŠ</option><option>ÙƒÙˆÙŠØªÙŠ</option></select>
            </div>
        `;
        document.getElementById('tailor_items').appendChild(div);
    }

    function calc() {
        let t = 0; document.querySelectorAll('.f_select').forEach(s => t += parseInt(s.value));
        document.getElementById('t_total').innerText = t.toLocaleString();
        document.getElementById('grand_total').innerText = t.toLocaleString(); // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¬Ø§Ù‡Ø² Ù„Ø§Ø­Ù‚Ø§Ù‹
    }

    async function sendOrder() {
        let order = { name: document.getElementById('cust_name').value, total: document.getElementById('grand_total').innerText };
        await fetch(n8n, { method: 'POST', body: JSON.stringify(order) });
        alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­ Ù„Ù…Ø­Ù„ Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ!"); location.reload();
    }

    window.onload = addTailorItem;
</script>
</body>
</html>
