<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ Ù„Ù„Ø®ÙŠØ§Ø·Ø© - Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„</title>
    <style>
        :root { --gold: #d4af37; --brown: #5d4037; --bg: #fdfbf7; --white: #ffffff; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: var(--bg); margin: 0; padding: 10px; direction: rtl; }
        
        .main-container { max-width: 600px; margin: auto; background: var(--white); border-radius: 25px; border: 1px solid rgba(212,175,55,0.3); box-shadow: 0 15px 40px rgba(0,0,0,0.05); overflow: hidden; }
        
        /* ØªÙ†Ø³ÙŠÙ‚ Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© Ù…Ø¹ Ø§Ù„Ø´Ø¹Ø§Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ø§Ù„Ø´ÙØ§Ù */
        .header { text-align: center; padding: 30px 20px; background: transparent; position: relative; }
        .logo { width: 180px; height: auto; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1)); transition: 0.3s; }
        .store-title { margin-top: 10px; color: var(--brown); font-size: 22px; font-weight: bold; letter-spacing: 1px; }

        .cust-info { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 15px; background: #fff9eb; border-top: 1px solid #f0e6cc; }
        .cust-info input { padding: 12px; border: 1px solid #ddd; border-radius: 10px; font-size: 14px; outline: none; width: 100%; box-sizing: border-box; background: white;}

        .main-tabs { display: flex; background: #f0f0f0; padding: 5px; }
        .tab-btn { flex: 1; padding: 12px; border: none; cursor: pointer; font-weight: bold; background: transparent; color: #777; transition: 0.3s; border-radius: 15px; }
        .tab-btn.active { background: var(--gold); color: white; box-shadow: 0 4px 10px rgba(212,175,55,0.3); }

        .section { display: none; padding: 20px; }
        .section.active { display: block; animation: fadeIn 0.5s; }

        @keyframes fadeIn { from {opacity: 0;} to {opacity: 1;} }

        /* ØªÙ†Ø³ÙŠÙ‚ Ù‚Ø³Ù… Ø§Ù„Ø¬Ø§Ù‡Ø² */
        .ready-nav { display: flex; gap: 8px; margin-bottom: 20px; overflow-x: auto; padding-bottom: 10px; scrollbar-width: none; }
        .ready-type-btn { padding: 8px 20px; border: 1px solid var(--gold); border-radius: 25px; background: white; white-space: nowrap; cursor: pointer; font-size: 13px; color: var(--brown); font-weight: bold; }
        .ready-type-btn.active { background: var(--brown); color: white; border-color: var(--brown); }
        
        .items-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .product-card { border: 1px solid #f0f0f0; border-radius: 20px; overflow: hidden; background: white; box-shadow: 0 4px 15px rgba(0,0,0,0.03); transition: 0.3s; padding-bottom: 12px; }
        .product-card img { width: 100%; height: 160px; object-fit: cover; }
        .old-price { text-decoration: line-through; color: #bbb; font-size: 12px; margin-left: 5px; }
        .new-price { color: #2e7d32; font-weight: bold; font-size: 16px; }

        .selected-thobe-card { background: #fffdf7; border: 1px solid var(--gold); border-radius: 20px; padding: 15px; margin-bottom: 15px; position: relative; box-shadow: 0 4px 10px rgba(212,175,55,0.1); }
        .remove-card { position: absolute; top: 10px; left: 10px; background: #ff5252; color: white; border: none; border-radius: 50%; width: 28px; height: 28px; cursor: pointer; font-weight: bold; }
        
        .pay-card { border: 1px solid #eee; padding: 15px; border-radius: 15px; text-align: center; cursor: pointer; background: #fff; transition: 0.3s; border-bottom: 3px solid #eee; }
        .pay-card:hover { transform: translateY(-2px); }
        
        .admin-panel { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 10000; justify-content: center; align-items: center; backdrop-filter: blur(5px); }
        .admin-content { background: #1a1a1a; color: white; padding: 25px; border-radius: 25px; width: 90%; max-width: 400px; border: 1px solid var(--gold); }
        .admin-content input, .admin-content select { width: 100%; padding: 12px; margin-bottom: 12px; border-radius: 10px; border: 1px solid #333; background: #222; color: white; box-sizing: border-box; }

        .btn-send { width: 100%; padding: 20px; background: var(--brown); color: white; border: none; border-radius: 18px; font-size: 18px; font-weight: bold; margin-top: 25px; cursor: pointer; box-shadow: 0 8px 20px rgba(93,64,55,0.3); }
        .settings-btn { position: fixed; bottom: 25px; left: 25px; background: var(--white); border: 1px solid var(--gold); border-radius: 50%; width: 55px; height: 55px; cursor: pointer; font-size: 26px; z-index: 1000; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
    </style>
</head>
<body>

<button class="settings-btn" onclick="openAdmin()">âš™ï¸</button>

<div class="main-container" id="app_body">
    <div class="header">
        <img src="https://i.ibb.co/C3YFp0k7/688339f4-1296-48c0-bc66-3be039832675.png" class="logo" id="store_logo" alt="Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ Ù„Ù„Ø®ÙŠØ§Ø·Ø©">
        <div class="store-title">Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ Ù„Ù„Ø®ÙŠØ§Ø·Ø© Ø§Ù„Ø±Ø¬Ø§Ù„ÙŠØ©</div>
    </div>

    <div class="cust-info">
        <input type="text" id="c_name" placeholder="Ø¥Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„">
        <input type="tel" id="c_phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„">
    </div>

    <div class="main-tabs">
        <button class="tab-btn active" onclick="switchMainTab('tailor')">Ø§Ù„ØªÙØµÙŠÙ„</button>
        <button class="tab-btn" onclick="switchMainTab('ready')">Ø§Ù„Ù…Ù„Ø§Ø¨Ø³ Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©</button>
    </div>

    <div id="section_tailor" class="section active">
        <button type="button" style="width:100%; padding:18px; background:#fff; border:2px dashed var(--gold); border-radius:15px; color:var(--gold); font-weight:bold; cursor:pointer;" onclick="openFabricModal()">+ ØªÙØµÙŠÙ„ Ø«ÙˆØ¨ Ø¬Ø¯ÙŠØ¯</button>
        <div id="tailor_list" style="margin-top:20px;"></div>
    </div>

    <div id="section_ready" class="section">
        <div class="ready-nav">
            <button class="ready-type-btn active" onclick="filterReady('all', this)">Ø§Ù„ÙƒÙ„</button>
            <button class="ready-type-btn" onclick="filterReady('thobe_r', this)">Ø«ÙŠØ§Ø¨</button>
            <button class="ready-type-btn" onclick="filterReady('coat_r', this)">Ø£ÙƒÙˆØ§Øª</button>
            <button class="ready-type-btn" onclick="filterReady('shawl_r', this)">Ø´ÙŠÙ„Ø§Ù†</button>
        </div>
        <div id="ready_display" class="items-grid">
            <p style="text-align:center; grid-column:1/-1; color:#999; padding:40px 0;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ø¬Ø§Ù‡Ø²Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</p>
        </div>
    </div>

    <div style="padding:20px; background:#fff; border-top:8px solid #f9f9f9;">
        <h4 style="margin:0 0 15px 0; color:var(--brown);">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹:</h4>
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px;">
            <div class="pay-card" onclick="selectPayment('Ø§Ù„ÙƒØ±ÙŠÙ…ÙŠ', 'Ø­Ø³Ø§Ø¨ Ø±ÙŠØ§Ù„ ÙŠÙ…Ù†ÙŠ: 3005374854', this)">
                <div style="font-weight:bold; color:#1a5eb8; font-size:14px;">Ø¨Ù†Ùƒ Ø§Ù„ÙƒØ±ÙŠÙ…ÙŠ</div>
            </div>
            <div class="pay-card" onclick="selectPayment('Ù…Ø­ÙØ¸Ø© Ø¬ÙŠØ¨', 'Ø±Ù‚Ù… Ø§Ù„Ù†Ù‚Ø·Ø©: 595720', this)">
                <div style="font-weight:bold; color:#f39c12; font-size:14px;">Ù…Ø­ÙØ¸Ø© Ø¬ÙŠØ¨</div>
            </div>
        </div>
        
        <div id="account_display" style="display:none; background:#fff9eb; border:1px dashed var(--gold); padding:15px; border-radius:12px; text-align:center; margin-top:15px;">
            <div id="account_number" style="font-size:18px; font-weight:bold; color:var(--brown);"></div>
        </div>

        <div id="receipt_section" style="display:none; margin-top:15px; padding:15px; border:1px solid #eee; border-radius:12px; background:#fafafa;">
            <label style="font-size:13px; font-weight:bold; color:#555; display:block; margin-bottom:8px;">ğŸ“¸ Ø¥Ø±ÙØ§Ù‚ ØµÙˆØ±Ø© Ø§Ù„Ø¥ÙŠØµØ§Ù„:</label>
            <input type="file" id="receipt_file" accept="image/*" onchange="encodeReceipt(this)">
        </div>
        <input type="hidden" id="selected_payment" value="Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ¯">
    </div>

    <div style="background:var(--brown); color:white; padding:25px; text-align:center;">
        <div style="font-size:14px; opacity:0.8; margin-bottom:5px;">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ</div>
        <h2 style="margin:0; font-size:32px;"><span id="final_total">0</span> <small style="font-size:14px;">Ø±ÙŠØ§Ù„</small></h2>
    </div>
    <button type="button" class="btn-send" onclick="submitOrder()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†</button>
</div>

<div id="adminPanel" class="admin-panel">
    <div class="admin-content">
        <h3 style="text-align:center; color:var(--gold);">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ</h3>
        <select id="adm_cat">
            <option value="fabric">Ø¥Ø¶Ø§ÙØ© Ù‚Ù…Ø§Ø´ Ø¬Ø¯ÙŠØ¯</option>
            <option value="thobe_r">Ø¥Ø¶Ø§ÙØ© Ø«ÙˆØ¨ Ø¬Ø§Ù‡Ø²</option>
            <option value="coat_r">Ø¥Ø¶Ø§ÙØ© ÙƒÙˆØª Ø¬Ø§Ù‡Ø²</option>
            <option value="shawl_r">Ø¥Ø¶Ø§ÙØ© Ø´Ø§Ù„ Ø¬Ø§Ù‡Ø²</option>
            <option value="logo">ØªØºÙŠÙŠØ± Ø§Ù„Ø´Ø¹Ø§Ø±</option>
        </select>
        <input type="file" id="adm_file" onchange="encodeImg(this)">
        <input type="text" id="adm_title" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ / Ø§Ù„Ù‚Ù…Ø§Ø´">
        <input type="number" id="adm_old" placeholder="Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø³Ø§Ø¨Ù‚ (Ù„Ù„Ø®ØµÙ…)">
        <input type="number" id="adm_new" placeholder="Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ">
        <button onclick="saveProduct()" style="width:100%; padding:15px; background:var(--gold); color:white; border:none; border-radius:12px; font-weight:bold; cursor:pointer;">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ØªØ¬Ø±</button>
        <button onclick="closeAdmin()" style="width:100%; background:none; border:none; color:#999; margin-top:12px; cursor:pointer;">Ø¥Ù„ØºØ§Ø¡</button>
    </div>
</div>

<div id="fabricModal" class="admin-panel" style="background:rgba(0,0,0,0.8);">
    <div style="background:white; width:90%; max-width:450px; padding:25px; border-radius:25px;">
        <h3 style="text-align:center; color:var(--brown);">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ù‚Ù…Ø§Ø´</h3>
        <div id="modal_fabric_list" style="display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:15px;"></div>
        <button onclick="document.getElementById('fabricModal').style.display='none'" style="width:100%; margin-top:20px; padding:12px; border:none; border-radius:12px; background:#f0f0f0;">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
</div>

<script>
    let db = { fabrics: [], ready: [] };
    let tempImg = ""; let receiptImg = "";
    let readyCartTotal = 0;

    function openAdmin() { if(prompt("ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:") === "1234") document.getElementById('adminPanel').style.display='flex'; }
    function closeAdmin() { document.getElementById('adminPanel').style.display='none'; }
    function encodeImg(i) { let r = new FileReader(); r.onload = (e) => tempImg = e.target.result; r.readAsDataURL(i.files[0]); }
    function encodeReceipt(i) { let r = new FileReader(); r.onload = (e) => receiptImg = e.target.result; r.readAsDataURL(i.files[0]); }

    function switchMainTab(t) {
        document.querySelectorAll('.section, .tab-btn').forEach(el => el.classList.remove('active'));
        document.getElementById('section_'+t).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    function saveProduct() {
        const cat = document.getElementById('adm_cat').value;
        const title = document.getElementById('adm_title').value;
        const oldP = document.getElementById('adm_old').value || 0;
        const newP = document.getElementById('adm_new').value;

        if (cat === 'logo') {
            document.getElementById('store_logo').src = tempImg;
        } else if (cat === 'fabric') {
            db.fabrics.push({ title, newPrice: newP, img: tempImg });
        } else {
            db.ready.push({ cat, title, oldPrice: oldP, newPrice: newP, img: tempImg });
        }
        alert("ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­");
        filterReady('all');
        closeAdmin();
    }

    function openFabricModal() {
        const list = document.getElementById('modal_fabric_list');
        list.innerHTML = db.fabrics.length ? db.fabrics.map(f => `
            <div class="pay-card" onclick="confirmFabricSelection('${f.title}', ${f.newPrice}, '${f.img}')">
                <img src="${f.img}" style="width:100%; height:80px; object-fit:cover; border-radius:10px;">
                <div style="font-size:12px; margin-top:8px; font-weight:bold;">${f.title}</div>
            </div>
        `).join('') : '<p style="grid-column:1/-1; text-align:center; color:red;">ÙŠØ±Ø¬Ù‰ Ø±ÙØ¹ Ø£Ù‚Ù…Ø´Ø© Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø£ÙˆÙ„Ø§Ù‹</p>';
        document.getElementById('fabricModal').style.display = 'flex';
    }

    function confirmFabricSelection(name, price, img) {
        const id = Date.now();
        const card = document.createElement('div');
        card.className = 'selected-thobe-card';
        card.id = `thobe_${id}`;
        card.innerHTML = `
            <button type="button" class="remove-card" onclick="removeThobe(${id})">Ã—</button>
            <div style="display:flex; gap:12px; align-items:center;">
                <img src="${img}" style="width:50px; height:50px; border-radius:10px; object-fit:cover; border:1px solid #eee;">
                <div><b style="color:var(--brown)">Ø«ÙˆØ¨: ${name}</b><br><span style="color:#2e7d32; font-weight:bold;">${price} Ø±ÙŠØ§Ù„</span></div>
            </div>
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:8px; margin-top:12px;">
                <select class="admin-content select" style="background:white; color:#333; padding:8px; border:1px solid #ddd;"><option>Ù‚Ù„Ø§Ø¨ Ù…Ù„ÙƒÙŠ</option><option>ØµÙŠÙ†ÙŠ</option><option>ÙØ±Ù†Ø³ÙŠ</option></select>
                <select class="admin-content select" style="background:white; color:#333; padding:8px; border:1px solid #ddd;"><option>ÙƒØ¨Ùƒ Ù‚Ù…Ø§Ø´</option><option>ÙƒØ¨Ùƒ Ø­Ø´Ùˆ</option><option>Ø³Ø§Ø¯Ø©</option></select>
                <select class="admin-content select" style="background:white; color:#333; padding:8px; border:1px solid #ddd;"><option>ÙƒØ¨Ø³ Ø¸Ø§Ù‡Ø±</option><option>Ø³Ø­Ø§Ø¨ VIP</option><option>Ø²Ø±Ø§Ø± Ù…Ø®ÙÙŠ</option></select>
                <select class="admin-content select" style="background:white; color:#333; padding:8px; border:1px solid #ddd;"><option>Ø®ÙŠØ§Ø· Ù‚Ø·Ø±ÙŠ</option><option>Ø³Ø¹ÙˆØ¯ÙŠ</option><option>ÙƒÙˆÙŠØªÙŠ</option></select>
            </div>
            <input type="hidden" class="item-price" value="${price}">
        `;
        document.getElementById('tailor_list').appendChild(card);
        calcGrandTotal();
        document.getElementById('fabricModal').style.display = 'none';
    }

    function filterReady(type, btn) {
        if(btn) {
            document.querySelectorAll('.ready-type-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }
        const display = document.getElementById('ready_display');
        const items = type === 'all' ? db.ready : db.ready.filter(i => i.cat === type);
        display.innerHTML = items.length ? items.map(i => `
            <div class="product-card">
                <img src="${i.img}">
                <div style="padding:10px; font-size:14px; font-weight:bold; color:var(--brown);">${i.title}</div>
                <div style="padding-bottom:10px;">
                    ${i.oldPrice > 0 ? `<span class="old-price">${i.oldPrice}</span>` : ''}
                    <span class="new-price">${i.newPrice} Ø±ÙŠØ§Ù„</span>
                </div>
                <button onclick="addReadyToCart(${i.newPrice})" style="width:90%; background:var(--gold); border:none; color:white; border-radius:8px; padding:8px; cursor:pointer; font-weight:bold;">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø·Ù„Ø¨</button>
            </div>
        `).join('') : '<p style="grid-column:1/-1; text-align:center; padding:40px 0; color:#999;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª</p>';
    }

    function addReadyToCart(p) { readyCartTotal += parseInt(p); calcGrandTotal(); alert("ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø¬Ø§Ù‡Ø²"); }
    function removeThobe(id) { document.getElementById(`thobe_${id}`).remove(); calcGrandTotal(); }

    function calcGrandTotal() {
        let t = readyCartTotal;
        document.querySelectorAll('.item-price').forEach(i => t += parseInt(i.value || 0));
        document.getElementById('final_total').innerText = t.toLocaleString();
    }

    function selectPayment(m, d, el) {
        document.querySelectorAll('.pay-card').forEach(c => { c.style.borderColor = '#eee'; c.style.background = '#fff'; });
        el.style.borderColor = 'var(--gold)'; el.style.background = '#fff9eb';
        document.getElementById('account_display').style.display = 'block';
        document.getElementById('account_number').innerText = d;
        document.getElementById('selected_payment').value = m + " (" + d + ")";
        document.getElementById('receipt_section').style.display = 'block';
    }

    function submitOrder() {
        const name = document.getElementById('c_name').value;
        const pay = document.getElementById('selected_payment').value;
        const total = document.getElementById('final_total').innerText;
        if(!name || pay === "Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ¯" || total === "0") return alert("ÙŠØ±Ø¬Ù‰ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ø®ØªÙŠØ§Ø± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹");

        document.getElementById('app_body').innerHTML = `
            <div style="text-align:center; padding:60px 20px;">
                <div style="font-size:60px; color:green; margin-bottom:20px;">âœ…</div>
                <h2 style="color:var(--brown);">ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­!</h2>
                <p>Ø¹Ø²ÙŠØ²ÙŠ <b>${name}</b>ØŒ Ø´ÙƒØ±Ø§Ù‹ Ù„Ø«Ù‚ØªÙƒ Ø¨Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ.</p>
                <div style="border:1px solid var(--gold); padding:25px; border-radius:20px; background:#fffdf7; margin:30px 0; box-shadow:0 10px 30px rgba(0,0,0,0.05);">
                    <p style="margin:5px 0;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ù„Øº: <b>${total} Ø±ÙŠØ§Ù„</b></p>
                    <p style="margin:5px 0;">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹: <b>${pay}</b></p>
                    ${receiptImg ? `<div style="margin-top:15px;"><small>ØµÙˆØ±Ø© Ø§Ù„Ø¥ÙŠØµØ§Ù„:</small><br><img src="${receiptImg}" style="width:120px; border-radius:10px; border:1px solid #ddd; margin-top:10px;"></div>` : ''}
                </div>
                <button onclick="location.reload()" style="padding:15px 40px; background:var(--brown); color:white; border:none; border-radius:15px; font-weight:bold; cursor:pointer;">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…ØªØ¬Ø±</button>
            </div>
        `;
    }
</script>
</body>
</html>
