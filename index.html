<div class="yaqoot-btn" onclick="toggleYaqoot()">โจ ุงุณุฃู ูุงููุช</div>

<div id="yaqoot_chat" class="yaqoot-chat" style="display:none; flex-direction:column; height:400px;">
    <div style="background:var(--brown); color:white; padding:12px; font-weight:bold; display:flex; justify-content:space-between; align-items:center;">
        <span>๐ ูุงููุช - ูุณุงุนุฏ ุงููุฑููู</span>
        <span onclick="toggleYaqoot()" style="cursor:pointer; font-size:20px;">ร</span>
    </div>
    
    <div id="chat_body" style="flex:1; padding:15px; overflow-y:auto; background:#f9f9f9; font-size:13px; display:flex; flex-direction:column; gap:10px;">
        <div style="background:#eee; padding:10px; border-radius:10px; align-self:flex-start; max-width:80%;">
            ูุฑุญุจุงู ุจู ูู ุฑุญุงุจ ุงููุฑููู! ุฃูุง ูุงููุชุ ููู ุฃุฎุฏูู ุงููููุ
        </div>
        <div id="quick_options" style="display:flex; flex-wrap:wrap; gap:5px;">
            <button onclick="yaqootAction('measure')" style="padding:6px 10px; border:1px solid var(--gold); background:white; border-radius:15px; cursor:pointer; font-size:11px;">๐ ููู ุขุฎุฐ ููุงุณูุ</button>
            <button onclick="yaqootAction('guarantee')" style="padding:6px 10px; border:1px solid var(--gold); background:white; border-radius:15px; cursor:pointer; font-size:11px;">๐ก๏ธ ูุง ูู ุงูุถูุงูุ</button>
            <button onclick="yaqootAction('location')" style="padding:6px 10px; border:1px solid var(--gold); background:white; border-radius:15px; cursor:pointer; font-size:11px;">๐ ุฃูู ูููุนููุ</button>
        </div>
    </div>

    <div style="padding:10px; border-top:1px solid #eee; display:flex; gap:5px; background:white;">
        <input type="text" id="yaqoot_input" placeholder="ุงูุชุจ ุณุคุงูู ููุง..." style="flex:1; padding:8px; border:1px solid #ddd; border-radius:20px; outline:none;">
        <button onclick="userAskYaqoot()" style="background:var(--gold); color:white; border:none; border-radius:50%; width:35px; height:35px; cursor:pointer;">โ</button>
    </div>
</div>

<script>
// --- ููุทู ูุงููุช ุงูุฐูู ---

function toggleYaqoot() {
    const chat = document.getElementById('yaqoot_chat');
    chat.style.display = (chat.style.display === 'none' || chat.style.display === '') ? 'flex' : 'none';
}

function addChatMessage(text, isUser = false) {
    const body = document.getElementById('chat_body');
    const msg = document.createElement('div');
    msg.style.padding = "10px";
    msg.style.borderRadius = "10px";
    msg.style.maxWidth = "80%";
    msg.style.fontSize = "13px";
    msg.style.lineHeight = "1.5";
    
    if(isUser) {
        msg.style.background = var(--gold);
        msg.style.color = "white";
        msg.style.alignSelf = "flex-end";
    } else {
        msg.style.background = "#eee";
        msg.style.color = "#333";
        msg.style.alignSelf = "flex-start";
    }
    
    msg.innerText = text;
    body.appendChild(msg);
    body.scrollTop = body.scrollHeight; // ุงูุชูุฑูุฑ ูุฃุณูู ุชููุงุฆูุงู
}

function yaqootAction(type) {
    if(type === 'measure') {
        addChatMessage("๐ ูุฃุฎุฐ ููุงุณู ุจุดูู ุตุญูุญ:\n1. ุงุณุชุฎุฏู ูุชุฑ ุฎูุงุทุฉ ูุฑู.\n2. ูู ุจุงุณุชูุงูุฉ.\n3. ุงูุทูู ูู ุงููุชู ูููุนุจ.\n4. ุงูุตุฏุฑ ูุน ุชุฑู ูุณุงูุฉ ุฅุตุจุนูู.\nููููู ุงูุถุบุท ุนูู ุนูุงูุฉ (ุ) ุจุฌุงูุจ ูุณู ุงูููุงุณุงุช ูุฑุคูุฉ ุงูุฏููู ุงููุตูุฑ.");
    } else if(type === 'guarantee') {
        addChatMessage("๐ก๏ธ ุถูุงู ุงููุฑููู ุงูุฐูุจู: ูุถูู ูู ุฌูุฏุฉ ุงูุฎูุงุทุฉ ูููุน ุงูููุงุด. ูู ุญุงู ูุฌูุฏ ุฃู ุฎุทุฃ ูู ุงูููุงุณ ุงููุงุชุฌ ุนู ุงูุฎูุงุทุฉุ ูุชุญูู ุงูุชุนุฏูู ุฃู ุงูุงุณุชุจุฏุงู ูุฌุงูุงู.");
    } else if(type === 'location') {
        addChatMessage("๐ ูููุนูุง: ุงูููู - ุตูุนุงุก (ุงููุฑูุฒ ุงูุฑุฆูุณู). ููุง ูููุฑ ุฎุฏูุฉ ุงูุชูุตูู ููู ุงููุญุงูุธุงุช.");
    }
}

function userAskYaqoot() {
    const input = document.getElementById('yaqoot_input');
    const question = input.value.trim();
    if(!question) return;

    addChatMessage(question, true);
    input.value = "";

    // ุฑุฏูุฏ ุฐููุฉ ุจุณูุทุฉ
    setTimeout(() => {
        const q = question.toLowerCase();
        if(q.includes("ุณุนุฑ") || q.includes("ุจูู")) {
            addChatMessage("๐ฐ ุฃุณุนุงุฑูุง ุชุฎุชูู ุญุณุจ ููุน ุงูููุงุด ุงููุฎุชุงุฑ. ููููู ุชุตูุญ ูุณู ุงูุฃููุดุฉ ูุฑุคูุฉ ุณุนุฑ ูู ุตูู ุดุงูู ุงูุชูุตูู.");
        } else if(q.includes("ุชูุตูู") || q.includes("ููุช")) {
            addChatMessage("๐ ูุณุชุบุฑู ุงูุชูุตูู ุนุงุฏุฉ ูู 3 ุฅูู 7 ุฃูุงูุ ูุงูุชูุตูู ูุชุงุญ ูุฌููุน ุงููุฏู.");
        } else if(q.includes("ููุง") || q.includes("ูุฑุญุจุง")) {
            addChatMessage("ุฃููุงู ุจู ูุง ุบุงูู! ูุงููุช ูู ุฎุฏูุชูุ ุงุณุฃููู ุนู ุงูููุงุณุงุช ุฃู ุงูุฃููุดุฉ.");
        } else {
            addChatMessage("ุฅุฌุงุจุฉ ุฐููุฉ: ุณุคุงู ุฑุงุฆุน! ูุฑุฌู ุฅุชูุงู ุทูุจู ูุณูููู ููุธู ุฎุฏูุฉ ุงูุนููุงุก ุจููุงูุดุฉ ูุฐู ุงูููุทุฉ ูุนู ุจุงูุชูุตูู ุนุจุฑ ุงููุงุชุณุงุจ.");
        }
    }, 800);
}

// ุชุดุบูู ุงูุฅุฑุณุงู ุนูุฏ ุงูุถุบุท ุนูู Enter
document.getElementById('yaqoot_input')?.addEventListener('keypress', function (e) {
    if (e.key === 'Enter') userAskYaqoot();
});
</script>
