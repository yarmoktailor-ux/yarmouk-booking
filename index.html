<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ Ø§Ù„Ø­Ø¯ÙŠØ« | Ø¥Ø±Ø«ÙŒ Ù…Ù† Ø§Ù„ÙØ®Ø§Ù…Ø©</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root { --gold: #d4af37; --brown: #5d4037; --bg: #fdfbf7; --white: #ffffff; --dark: #1a1a1a; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background-color: var(--bg); margin: 0; padding: 0; direction: rtl; color: var(--dark); }
        
        /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ù…Ù„ÙƒÙŠ */
        .royal-header { background: linear-gradient(rgba(93, 64, 55, 0.9), rgba(93, 64, 55, 0.9)), url('https://i.ibb.co/688339f4/bg.jpg'); color: white; text-align: center; padding: 40px 20px; border-bottom: 5px solid var(--gold); }
        #main_logo { width: 110px; height: 110px; border-radius: 50%; border: 3px solid var(--gold); background: white; margin-bottom: 10px; }

        .container { max-width: 600px; margin: -30px auto 30px; background: white; border-radius: 25px; box-shadow: 0 15px 50px rgba(0,0,0,0.15); overflow: hidden; padding: 25px; }
        
        /* Ù‚ØµØ© Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ */
        .legacy-box { background: #fff9eb; border-right: 5px solid var(--gold); padding: 15px; margin-bottom: 20px; font-size: 14px; line-height: 1.6; }

        /* Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª ÙˆØ§Ù„Ø£Ø²Ø±Ø§Ø± */
        .section-title { color: var(--brown); font-weight: bold; margin: 20px 0 10px; display: flex; align-items: center; gap: 8px; }
        .input-field { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 10px; box-sizing: border-box; }

        /* Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª */
        .measure-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; background: #fefefe; padding: 15px; border-radius: 15px; border: 1px solid #eee; }
        .measure-grid div { text-align: center; }
        .measure-grid input { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 8px; text-align: center; font-weight: bold; color: var(--brown); }
        .measure-grid label { font-size: 12px; font-weight: bold; color: #777; display: block; margin-bottom: 5px; }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ© */
        .add-btn { width: 100%; padding: 20px; background: var(--white); border: 2px dashed var(--gold); color: var(--gold); border-radius: 15px; font-weight: bold; cursor: pointer; font-size: 16px; margin: 10px 0; transition: 0.3s; }
        .add-btn:hover { background: #fffcf5; transform: translateY(-2px); }

        /* Ù…Ø§Ø¨Ø¹Ø¯ Ø§Ù„Ø·Ù„Ø¨ - Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª */
        .total-card { background: var(--brown); color: white; padding: 25px; border-radius: 20px; text-align: center; margin-top: 25px; }
        .payment-box { display: flex; gap: 10px; margin: 15px 0; }
        .pay-item { flex: 1; padding: 10px; border-radius: 12px; color: white; text-align: center; cursor: pointer; font-size: 12px; }
        .kuraimi { background: #0056b3; } .jeeb { background: #f39c12; }

        /* ÙŠØ§Ù‚ÙˆØª */
        .yaqoot-bubble { position: fixed; bottom: 25px; left: 25px; background: var(--dark); color: var(--gold); border: 2px solid var(--gold); border-radius: 50px; padding: 12px 25px; cursor: pointer; z-index: 999; box-shadow: 0 5px 20px rgba(0,0,0,0.3); font-weight: bold; }

        /* Ø§Ù„Ù…ÙˆØ¯Ø§Ù„Ø§Øª */
        .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:10000; overflow-y:auto; padding:20px; }
        .product-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .item-card { background: white; border-radius: 15px; overflow: hidden; text-align: center; padding-bottom: 10px; }
        .item-card img { width: 100%; height: 150px; object-fit: cover; }
    </style>
</head>
<body>

<div class="royal-header">
    <img src="" id="main_logo">
    <h2 style="margin:5px 0;">Ø§Ù„Ù€ÙŠÙ€Ø±Ù…Ù€ÙˆÙƒ Ø§Ù„Ù€Ø­Ù€Ø¯ÙŠØ«</h2>
    <p style="color: var(--gold); font-size: 13px; letter-spacing: 1px;">Ù†Ø­Ù† Ù„Ø§ Ù†Ø®ÙŠØ· Ø£Ø«ÙˆØ§Ø¨Ø§Ù‹.. Ù†Ø­Ù† Ù†ØµÙ†Ø¹ Ù‡ÙŠØ¨ØªÙƒ</p>
</div>

<div class="container">
    <div class="legacy-box">
        <strong>ğŸ“œ Ø¥Ø±Ø« Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ (Ù…Ù†Ø° 2002):</strong><br>
        ÙÙŠ Ø¹Ø§Ù… 2002ØŒ ÙˆØ¶Ø¹ Ø§Ù„ÙˆØ§Ù„Ø¯ -Ø±Ø­Ù…Ù‡ Ø§Ù„Ù„Ù‡- Ø§Ù„Ø­Ø¬Ø± Ø§Ù„Ø£Ø³Ø§Ø³.. Ø§Ù„ÙŠÙˆÙ… Ù†ÙˆØ§ØµÙ„ Ø§Ù„Ù…Ø³ÙŠØ±Ø© Ù„Ù†ØµÙ„ Ø¨Ø£Ù†Ø§Ù‚ØªÙƒ Ø¥Ù„Ù‰ Ø£Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª Ø¨Ø¯Ù‚Ø© Ø§Ù„Ù…Ù„ÙŠ.
    </div>

    <h4 class="section-title">ğŸ‘¤ Ø¨ÙŠØ§Ù†Ø§Øª ØµØ§Ø­Ø¨ Ø§Ù„Ù‡ÙŠØ¨Ø©:</h4>
    <input type="text" id="c_name" class="input-field" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ">
    <input type="tel" id="c_phone" class="input-field" placeholder="Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨">

    <h4 class="section-title">ğŸ“ Ù…Ù‚Ø§Ø³Ø§ØªÙƒ Ø¨Ø¯Ù‚Ø© Ø§Ù„Ù…Ù„ÙŠ:</h4>
    <div class="measure-grid">
        <div><label>Ø·ÙˆÙ„</label><input type="number" class="m-input"></div>
        <div><label>ÙƒØªÙ</label><input type="number" class="m-input"></div>
        <div><label>ÙŠØ¯</label><input type="number" class="m-input"></div>
        <div><label>ØµØ¯Ø±</label><input type="number" class="m-input"></div>
        <div><label>Ø±Ù‚Ø¨Ø©</label><input type="number" class="m-input"></div>
        <div><label>ÙˆØ³Ø·</label><input type="number" class="m-input"></div>
        <div><label>ÙƒØ¨Ùƒ</label><input type="number" class="m-input"></div>
        <div><label>Ø®Ø·ÙˆØ©</label><input type="number" class="m-input"></div>
    </div>

    <h4 class="section-title">ğŸ“¦ ØµÙ…Ù… Ù…Ø¸Ù‡Ø±Ùƒ:</h4>
    <button class="add-btn" onclick="openCat('fabric')">â• Ø§Ø®ØªØ± Ù‚Ù…Ø§Ø´ Ø§Ù„ØªÙØµÙŠÙ„ (Ø¥Ø±Ø« Ø§Ù„ÙˆØ§Ù„Ø¯)</button>
    <button class="add-btn" onclick="openCat('ready')">â• ØªØ³ÙˆÙ‚ Ø§Ù„Ù…Ù„Ø§Ø¨Ø³ Ø§Ù„Ø¬Ø§Ù‡Ø²Ø© ÙˆØ§Ù„Ø´ÙŠÙ„Ø§Ù†</button>

    <div id="cart_items"></div>

    <div class="payment-box">
        <div class="pay-item kuraimi" onclick="copy('3005374854')">Ø§Ù„ÙƒØ±ÙŠÙ…ÙŠ: <br><b>3005374854</b></div>
        <div class="pay-item jeeb" onclick="copy('595720')">Ù…Ø­ÙØ¸Ø© Ø¬ÙŠØ¨: <br><b>595720</b></div>
    </div>

    <div class="total-card">
        <div style="opacity: 0.8; font-size: 14px;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„ÙØ§Ø®Ø±Ø©:</div>
        <h2 id="total_val" style="margin:10px 0;">0 Ø±ÙŠØ§Ù„</h2>
        <div id="deposit_note" style="background: rgba(255,255,255,0.1); padding: 10px; border-radius: 10px; font-size: 13px; color: var(--gold);"></div>
        <button onclick="confirmOrder()" style="width:100%; padding:15px; background:var(--gold); border:none; border-radius:12px; color:white; font-weight:bold; margin-top:15px; cursor:pointer;">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ¨Ø¯Ø¡ Ø§Ù„ØªÙ†ÙÙŠØ°</button>
    </div>
</div>

<div class="yaqoot-bubble" onclick="alert('ÙŠØ§Ù‚ÙˆØª Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ: Ø±Ø¶Ø§Ùƒ Ù‡Ùˆ Ø®ÙŠØ·Ù†Ø§ Ø§Ù„Ø£ÙˆÙ„. Ù†Ø¶Ù…Ù† Ù„Ùƒ Ø¯Ù‚Ø© Ø§Ù„Ù…Ù‚Ø§Ø³ 100% ÙˆØ¥Ù„Ø§ Ø§Ø³ØªØ¹Ø¯Ù†Ø§ Ø§Ù„Ø«ÙˆØ¨.')">âœ¨ Ø§Ø³Ø£Ù„ ÙŠØ§Ù‚ÙˆØª</div>

<div id="productModal" class="modal">
    <div style="display:flex; justify-content:space-between; color:white; margin-bottom:20px;">
        <h3 id="modal_title">Ø§Ù„Ù…Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„ÙƒÙŠ</h3>
        <button onclick="closeModal()" style="background:red; color:white; border:none; padding:10px 20px; border-radius:8px;">Ø¥ØºÙ„Ø§Ù‚ Ã—</button>
    </div>
    <div id="modal_list" class="product-grid"></div>
</div>

<script>
const firebaseConfig = { databaseURL: "https://alyarmok-store-default-rtdb.firebaseio.com/" };
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

let products = [];
let cart = [];

// Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
db.ref('settings/logo').on('value', s => document.getElementById('main_logo').src = s.val());
db.ref('products').on('value', s => {
    products = [];
    const data = s.val();
    for(let id in data) products.push({...data[id], id});
});

function copy(t) { navigator.clipboard.writeText(t); alert("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø­Ø³Ø§Ø¨: " + t); }

function openCat(cat) {
    const list = document.getElementById('modal_list');
    const filtered = products.filter(p => p.cat === cat);
    list.innerHTML = filtered.map(p => `
        <div class="item-card">
            <img src="${p.img}">
            <div style="padding:10px;">
                <b>${p.name}</b><br>
                <small>${p.desc || ''}</small><br>
                <span style="color:green; font-weight:bold;">${p.newP} Ø±ÙŠØ§Ù„</span>
                <button onclick="addToCart('${p.id}')" style="width:100%; margin-top:10px; background:var(--gold); color:white; border:none; padding:8px; border-radius:5px;">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</button>
            </div>
        </div>
    `).join('');
    document.getElementById('productModal').style.display = 'block';
}

function closeModal() { document.getElementById('productModal').style.display = 'none'; }

function addToCart(id) {
    cart.push(products.find(p => p.id === id));
    renderCart();
    closeModal();
}

function renderCart() {
    const area = document.getElementById('cart_items');
    area.innerHTML = cart.map((p, i) => `
        <div style="background:white; border:1px solid #ddd; padding:10px; border-radius:12px; margin-top:10px; display:flex; justify-content:space-between; align-items:center;">
            <span>${p.name}</span>
            <b>${p.newP} Ø±ÙŠØ§Ù„</b>
            <button onclick="cart.splice(${i},1); renderCart();" style="color:red; background:none; border:none;">Ã—</button>
        </div>
    `).join('');
    
    let total = cart.reduce((s, p) => s + parseInt(p.newP), 0);
    document.getElementById('total_val').innerText = total.toLocaleString() + " Ø±ÙŠØ§Ù„";
    
    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ø±Ø¨ÙˆÙ† Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰
    let note = "";
    if (total > 100000) note = "Ø¹Ø±Ø¨ÙˆÙ† Ø§Ù„Ø¨Ø¯Ø¡ (30%): " + (total * 0.3).toLocaleString() + " Ø±ÙŠØ§Ù„";
    else if (total >= 20000) note = "Ø¹Ø±Ø¨ÙˆÙ† Ø§Ù„Ø¨Ø¯Ø¡ (50%): " + (total * 0.5).toLocaleString() + " Ø±ÙŠØ§Ù„";
    else if (total > 0) note = "ÙŠÙØ¯ÙØ¹ ÙƒØ§Ù…Ù„ Ø§Ù„Ù…Ø¨Ù„Øº Ù„Ù„Ø·Ù„Ø¨Ø§Øª Ø£Ù‚Ù„ Ù…Ù† 20,000 Ø±ÙŠØ§Ù„";
    
    document.getElementById('deposit_note').innerText = note;
}

function confirmOrder() {
    const name = document.getElementById('c_name').value;
    if(!name || cart.length === 0) return alert("ÙØ¶Ù„Ø§Ù‹ØŒ Ø£ÙƒÙ…Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ ÙˆØ§Ø®ØªØ± Ù…Ø§ ÙŠÙ†Ø§Ø³Ø¨Ùƒ.");
    
    alert(`âœ¨ ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­ ÙŠØ§ ${name} âœ¨\n\nÙ†Ø­Ù† ÙÙŠ Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ ÙØ®ÙˆØ±ÙˆÙ† Ø¨Ø§Ø®ØªÙŠØ§Ø±Ùƒ Ù„Ø¥Ø±Ø«Ù†Ø§. Ø³Ù†Ù‚ÙˆÙ… Ø§Ù„Ø¢Ù† Ø¨Ù†Ù‚Ù„Ùƒ Ù„Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©.\n\nØ´ÙƒØ±Ø§Ù‹ Ù„Ø«Ù‚ØªÙƒ Ø¨Ù†Ø§!`);
    
    let msg = `*Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ - Ù…ØªØ¬Ø± Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ Ø§Ù„Ø­Ø¯ÙŠØ«*%0AğŸ‘¤ Ø§Ù„Ø¹Ù…ÙŠÙ„: ${name}%0AğŸ’° Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${document.getElementById('total_val').innerText}%0AğŸ“ Ø§Ù„Ø­Ø§Ù„Ø©: Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø¯Ø¡ Ø§Ù„Ù‚Øµ`;
    window.open(`https://wa.me/9677XXXXXXXX?text=${msg}`);
}
</script>
</body>
</html>
