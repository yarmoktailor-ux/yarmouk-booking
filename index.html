<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>خياط اليرموك - النسخة الاحترافية المدمجة</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root { --gold: #d4af37; --navy: #011627; }
        body { background-color: #0a0a0a; color: white; font-family: 'Segoe UI', sans-serif; }
        .gold-border { border: 1px solid var(--gold); }
        .navy-card { background-color: #1a1a1a; border: 1px solid #333; }
        .gold-text { color: var(--gold); }
        @media print { .no-print { display: none !important; } .print-only { display: block !important; color: black; } }
    </style>
</head>
<body>

    <header class="p-6 border-b border-gold-500/30 flex justify-between items-center bg-black sticky top-0 z-50">
        <h1 class="text-2xl font-bold gold-text underline decoration-double">اليرموك للخياطة</h1>
        <div class="flex gap-4">
            <button onclick="showPage('shop')" class="hover:text-gold-500 transition">المتجر</button>
            <button onclick="showPage('tailor')" class="hover:text-gold-500 transition">تفصيل</button>
            <button onclick="showPage('admin')" class="text-gray-500"><i class="fas fa-cog"></i></button>
        </div>
    </header>

    <div class="container mx-auto p-4 max-w-5xl">
        
        <section id="shop" class="page-content">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6" id="products-grid">
                </div>
        </section>

        <section id="tailor" class="page-content hidden">
            <div class="navy-card p-8 rounded-3xl shadow-2xl">
                <h2 class="text-3xl font-bold mb-8 gold-text border-r-4 pr-4 border-gold-500">سجل مقاسات العميل</h2>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                    <div><label class="block text-xs text-gray-400 mb-2">اسم العميل</label><input type="text" id="cust_name" class="w-full bg-black border border-gray-700 p-3 rounded-lg focus:border-gold-500 outline-none"></div>
                    <div><label class="block text-xs text-gray-400 mb-2">الطول</label><input type="number" id="m_len" class="w-full bg-black border border-gray-700 p-3 rounded-lg"></div>
                    <div><label class="block text-xs text-gray-400 mb-2">الكتف</label><input type="number" id="m_sh" class="w-full bg-black border border-gray-700 p-3 rounded-lg"></div>
                    <div><label class="block text-xs text-gray-400 mb-2">الرقبة</label><input type="number" id="m_neck" class="w-full bg-black border border-gray-700 p-3 rounded-lg"></div>
                    <div><label class="block text-xs text-gray-400 mb-2">اليد</label><input type="number" id="m_arm" class="w-full bg-black border border-gray-700 p-3 rounded-lg"></div>
                    <div><label class="block text-xs text-gray-400 mb-2">الصدر</label><input type="number" id="m_chest" class="w-full bg-black border border-gray-700 p-3 rounded-lg"></div>
                </div>
                <button onclick="saveAndPrint()" class="w-full mt-10 bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-4 rounded-xl shadow-lg transition-all">إصدار الفاتورة وحفظ المقاسات</button>
            </div>
        </section>

        <section id="admin" class="page-content hidden">
            <div class="bg-red-900/10 border border-red-900/30 p-6 rounded-xl mb-10">
                <h3 class="font-bold text-red-500 mb-4">إضافة منتج جديد للمتجر</h3>
                <div class="flex flex-col gap-4">
                    <input type="text" id="p_title" placeholder="اسم الثوب" class="bg-black border border-gray-700 p-3 rounded shadow-inner">
                    <input type="number" id="p_price" placeholder="السعر" class="bg-black border border-gray-700 p-3 rounded">
                    <input type="file" id="p_img" class="text-sm text-gray-400">
                    <button onclick="adminAdd()" class="bg-white text-black font-bold py-2 rounded">نشر المنتج</button>
                </div>
            </div>
        </section>

    </div>

    <footer class="mt-20 p-10 bg-black border-t border-gray-800 text-center text-gray-500 text-sm">
        <p>اليرموك - صنعاء_الأصبحي | هاتف: +966 773463560</p>
        <p class="mt-2 gold-text">مؤسسة خياطة فاخرة منذ 2002</p>
    </footer>

    <script>
        let db = JSON.parse(localStorage.getItem('yarmouk_db')) || [];

        function showPage(id) {
            document.querySelectorAll('.page-content').forEach(p => p.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
        }

        function adminAdd() {
            const title = document.getElementById('p_title').value;
            const price = document.getElementById('p_price').value;
            const file = document.getElementById('p_img').files[0];
            
            if(!title || !price || !file) return alert("يرجى ملء البيانات");

            const reader = new FileReader();
            reader.onload = (e) => {
                db.push({ title, price, img: e.target.result });
                localStorage.setItem('yarmouk_db', JSON.stringify(db));
                render();
                alert("تم النشر بنجاح!");
            };
            reader.readAsDataURL(file);
        }

        function render() {
            const grid = document.getElementById('products-grid');
            grid.innerHTML = db.map(p => `
                <div class="navy-card rounded-2xl overflow-hidden group hover:scale-105 transition-transform">
                    <img src="${p.img}" class="w-full h-64 object-cover opacity-80 group-hover:opacity-100">
                    <div class="p-4">
                        <h4 class="font-bold text-xl mb-1">${p.title}</h4>
                        <p class="gold-text font-bold">${p.price} ر.س</p>
                        <button class="w-full mt-4 bg-gray-800 py-2 rounded-lg text-xs hover:bg-gold-500 hover:text-black transition">شراء الآن</button>
                    </div>
                </div>
            `).join('');
        }

        function saveAndPrint() {
            const name = document.getElementById('cust_name').value;
            if(!name) return alert("سجل اسم العميل");
            alert("تم حفظ المقاسات للعميل: " + name);
            window.print();
        }

        render();
    </script>
</body>
</html>
