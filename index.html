<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ Ù„Ù„Ø®ÙŠØ§Ø·Ø© - Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ 2026</title>
	<style>
    	:root { --gold: #d4af37; --brown: #5d4037; --bg: #fdfbf7; --white: #ffffff; }
    	body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: var(--bg); margin: 0; padding: 10px; direction: rtl; }
    	
    	.main-container { max-width: 600px; margin: auto; background: var(--white); border-radius: 20px; border: 1px solid var(--gold); box-shadow: 0 10px 30px rgba(0,0,0,0.1); overflow: hidden; }
    	
    	/* Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ ÙˆÙ‚ØµØ© Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ */
    	.welcome-banner { background: var(--brown); color: white; padding: 15px; text-align: center; font-size: 13px; border-bottom: 2px solid var(--gold); }
    	.heritage-box { padding: 15px; background: #fffdf5; border-bottom: 1px solid #eee; text-align: center; font-size: 14px; color: #555; line-height: 1.6; }

    	.header { text-align: center; padding: 20px; border-bottom: 2px solid var(--gold); }
    	.cust-info { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 15px; background: #fff9eb; }
    	.cust-info input { padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 14px; outline: none; width: 100%; box-sizing: border-box;}

    	.main-tabs { display: flex; background: #eee; }
    	.tab-btn { flex: 1; padding: 15px; border: none; cursor: pointer; font-weight: bold; background: #eee; color: #666; transition: 0.3s; }
    	.tab-btn.active { background: var(--gold); color: white; }

    	.section { display: none; padding: 15px; }
    	.section.active { display: block; }

    	/* Ø´Ø¨ÙƒØ© Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª */
    	.measure-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin: 15px 0; background: #f9f9f9; padding: 10px; border-radius: 10px; }
    	.measure-grid label { font-size: 11px; color: var(--brown); font-weight: bold; display: block; margin-bottom: 4px; }
    	.measure-grid input { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px; text-align: center; box-sizing: border-box; font-size: 13px; }

    	.items-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
    	.product-card { border: 1px solid #eee; border-radius: 15px; overflow: hidden; background: white; text-align: center; padding-bottom: 10px; position: relative; }
    	.product-card img { width: 100%; height: 150px; object-fit: cover; }
    	.new-price { color: #28a745; font-weight: bold; font-size: 15px; }
        .old-price { color: #ff4d4d; text-decoration: line-through; font-size: 12px; margin-left: 5px; }

    	.yaqoot-btn { position: fixed; bottom: 80px; left: 20px; background-color: #1a1a1a; color: var(--gold); border: 2px solid var(--gold); border-radius: 50px; padding: 10px 20px; cursor: pointer; z-index: 1000; font-weight: bold; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
    	.yaqoot-chat { display: none; position: fixed; bottom: 130px; left: 20px; width: 250px; background: white; border: 2px solid var(--gold); border-radius: 15px; z-index: 1001; box-shadow: 0 10px 25px rgba(0,0,0,0.2); }

    	.guarantee-box { margin: 15px; padding: 12px; background: #fdf9f0; border: 1px dashed var(--gold); border-radius: 10px; font-size: 12px; color: #785e1a; }

    	.btn-send { width: 100%; padding: 18px; background: var(--brown); color: white; border: none; border-radius: 15px; font-size: 18px; font-weight: bold; margin-top: 20px; cursor: pointer; }
    	.settings-btn { position: fixed; bottom: 20px; left: 20px; background: var(--white); border: 1px solid var(--gold); border-radius: 50%; width: 50px; height: 50px; cursor: pointer; font-size: 24px; z-index: 1000; }
    	
    	.selected-thobe-card { background: #fff9eb; border: 1px solid var(--gold); border-radius: 15px; padding: 15px; margin-bottom: 15px; position: relative; }
    	.remove-card { position: absolute; top: 10px; left: 10px; background: #ff4d4d; color: white; border: none; border-radius: 50%; width: 25px; height: 25px; cursor: pointer; }
    	.thobe-opt { width: 100%; padding: 8px; border-radius: 8px; border: 1px solid #ddd; font-size: 12px; margin-top: 5px; background: white; }
        .del-badge { position: absolute; top: 5px; right: 5px; background: red; color: white; border: none; border-radius: 50%; width: 20px; height: 20px; cursor: pointer; font-size: 12px; }
	</style>
</head>
<body>

<div class="welcome-banner">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ.. "Ø¥Ø±Ø« Ø§Ù„ÙˆØ§Ù„Ø¯ ÙŠØ±Ø­Ø¨ Ø¨Ùƒ" âœ¨</div>
<div class="heritage-box">
	<strong>Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ.. Ø®ÙŠØ·ÙŒ Ù…Ù† Ø§Ù„Ù…Ø§Ø¶ÙŠØŒ ÙˆÙ†Ø³ÙŠØ¬ÙŒ Ù„Ù„Ù…Ø³ØªÙ‚Ø¨Ù„</strong><br>
	Ù…Ù†Ø° 2002ØŒ Ù†ØµÙ†Ø¹ Ù‡ÙŠØ¨ØªÙƒ Ø¨Ø¯Ù‚Ø© Ø§Ù„Ù‚ÙŠØ§Ø³ ÙˆØ®Ø¨Ø±Ø© Ø§Ù„Ø³Ù†ÙŠÙ†. Ù†Ø­Ù† Ù„Ø§ Ù†Ø®ÙŠØ· Ø£Ø«ÙˆØ§Ø¨Ø§Ù‹ØŒ Ù†Ø­Ù† Ù†ØµÙ†Ø¹ Ø­Ø¶ÙˆØ±Ùƒ.
</div>

<button class="settings-btn" onclick="openAdmin()">âš™ï¸</button>

<div class="yaqoot-btn" onclick="toggleYaqoot()">âœ¨ Ù‡ÙŠØ¨Ø© Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ</div>
<div id="yaqoot_chat" class="yaqoot-chat">
	<div style="background:var(--brown); color:white; padding:10px; border-radius:12px 12px 0 0; font-size:12px;">Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ Ø§Ù„Ø°ÙƒÙŠ</div>
	<div style="padding:15px; font-size:13px;" id="chat_text">
    	Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ! Ø£Ù†Ø§ ÙŠØ§Ù‚ÙˆØª.. ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ
    	<hr>
    	<button onclick="yaqootReply('policy')" style="width:100%; margin-bottom:5px; font-size:11px; cursor:pointer;">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø¶Ù…Ø§Ù†</button>
    	<button onclick="yaqootReply('offer')" style="width:100%; font-size:11px; cursor:pointer;">Ø¹Ø±Ø¶ Ø§Ù„ÙƒØ§Ø´</button>
	</div>
</div>

<div class="main-container" id="app_body">
	<div class="header"><h2 style="margin:0; color:var(--brown)">Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ Ø§Ù„Ø­Ø¯ÙŠØ«</h2></div>
	<div class="cust-info">
    	<input type="text" id="c_name" placeholder="Ø¥Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ ">
    	<input type="tel" id="c_phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
	</div>

	<div class="main-tabs">
    	<button class="tab-btn active" onclick="switchMainTab('tailor')">Ø§Ù„ØªÙØµÙŠÙ„ ÙˆØ§Ù„Ø£Ù‚Ù…Ø´Ø©</button>
    	<button class="tab-btn" onclick="switchMainTab('ready')">Ø§Ù„Ù…Ù„Ø§Ø¨Ø³ Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©</button>
	</div>

	<div id="section_tailor" class="section active">
    	<h4 style="margin:0 0 10px 0; color:var(--brown)">Ø£ÙˆÙ„Ø§Ù‹: Ù…Ù‚Ø§Ø³Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„ (Ø¨Ø§Ù„Ù‡Ù†Ø´)</h4>
    	<div class="measure-grid">
        	<div><label>Ø§Ù„Ø·ÙˆÙ„</label><input type="number" step="0.1" class="m-input" data-name="Ø§Ù„Ø·ÙˆÙ„"></div>
        	<div><label>Ø§Ù„ÙƒØªÙ</label><input type="number" step="0.1" class="m-input" data-name="Ø§Ù„ÙƒØªÙ"></div>
        	<div><label>Ø§Ù„ÙŠØ¯</label><input type="number" step="0.1" class="m-input" data-name="Ø§Ù„ÙŠØ¯"></div>
        	<div><label>Ø§Ù„ØµØ¯Ø±</label><input type="number" step="0.1" class="m-input" data-name="Ø§Ù„ØµØ¯Ø±"></div>
        	<div><label>Ø§Ù„Ø±Ù‚Ø¨Ø©</label><input type="number" step="0.1" class="m-input" data-name="Ø§Ù„Ø±Ù‚Ø¨Ø©"></div>
        	<div><label>ÙˆØ³Ø· ÙŠØ¯</label><input type="number" step="0.1" class="m-input" data-name="ÙˆØ³Ø· ÙŠØ¯"></div>
        	<div><label>Ø§Ù„ÙƒØ¨Ùƒ</label><input type="number" step="0.1" class="m-input" data-name="Ø§Ù„ÙƒØ¨Ùƒ"></div>
        	<div><label>Ø§Ù„Ø®Ø·ÙˆØ©</label><input type="number" step="0.1" class="m-input" data-name="Ø§Ù„Ø®Ø·ÙˆØ©"></div>
    	</div>
    	<button type="button" style="width:100%; padding:15px; background:#fff; border:2px dashed var(--gold); border-radius:12px; color:var(--gold); font-weight:bold; cursor:pointer;" onclick="openFabricModal()">+ Ø¥Ø¶Ø§ÙØ© Ø«ÙˆØ¨ ØªÙØµÙŠÙ„ Ø¬Ø¯ÙŠØ¯</button>
    	<div id="tailor_list" style="margin-top:15px;"></div>
	</div>

	<div id="section_ready" class="section">
    	<div id="ready_display" class="items-grid"></div>
	</div>

	<div class="guarantee-box">
    	ğŸ›¡ï¸ <strong>Ø¶Ù…Ø§Ù† Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ Ø§Ù„Ø°Ù‡Ø¨ÙŠ:</strong> Ù†Ø¶Ù…Ù† Ù„Ùƒ Ø¯Ù‚Ø© Ø§Ù„Ù…Ù‚Ø§Ø³ Ø¨Ø§Ù„Ù…Ù„ÙŠ. Ø±Ø¶Ø§Ùƒ Ù‡Ùˆ Ø®ÙŠØ·Ù†Ø§ Ø§Ù„Ø£ÙˆÙ„.
	</div>

	<div style="padding:15px; background:#fff; border-top:5px solid #eee;">
    	<h4 style="margin:0 0 10px 0; color:var(--brown); font-size:14px;">Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹:</h4>
    	<div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
        	<div class="pay-card" onclick="selectPayment('Ø§Ù„ÙƒØ±ÙŠÙ…ÙŠ', 'Ø­Ø³Ø§Ø¨ Ø±ÙŠØ§Ù„ ÙŠÙ…Ù†ÙŠ: 3005374854', this)">
            	<div style="font-size:12px; font-weight:bold; color:#1a5eb8; text-align:center; padding:10px; border:1px solid #ddd; border-radius:10px;">Ø¨Ù†Ùƒ Ø§Ù„ÙƒØ±ÙŠÙ…ÙŠ</div>
        	</div>
        	<div class="pay-card" onclick="selectPayment('Ù…Ø­ÙØ¸Ø© Ø¬ÙŠØ¨', 'Ø±Ù‚Ù… Ø§Ù„Ù†Ù‚Ø·Ø©: 595720', this)">
            	<div style="font-size:12px; font-weight:bold; color:#f39c12; text-align:center; padding:10px; border:1px solid #ddd; border-radius:10px;">Ù…Ø­ÙØ¸Ø© Ø¬ÙŠØ¨</div>
        	</div>
    	</div>
    	<div id="account_display" style="display:none; background:#fdfbf7; border:1px dashed var(--gold); padding:10px; border-radius:10px; text-align:center; margin-top:10px;">
        	<div id="account_number" style="font-size:18px; font-weight:bold; color:var(--brown);"></div>
    	</div>
    	<div id="receipt_section" style="display:none; margin-top:15px; padding:12px; border:1px solid #ddd; border-radius:10px; background:#fafafa;">
        	<label style="font-size:12px; font-weight:bold; color:#555; display:block; margin-bottom:5px;">ğŸ“¸ Ø¥Ø±ÙØ§Ù‚ ØµÙˆØ±Ø© Ø¥ÙŠØµØ§Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„:</label>
        	<input type="file" id="receipt_file" accept="image/*" onchange="encodeReceipt(this)">
    	</div>
    	<input type="hidden" id="selected_payment" value="Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ¯">
	</div>

	<div style="background:var(--brown); color:white; padding:20px; text-align:center;">
    	<h3 style="margin:0;">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <span id="final_total">0</span> Ø±ÙŠØ§Ù„</h3>
	</div>
	<button type="button" class="btn-send" onclick="submitOrder()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</button>
</div>

<div id="adminPanel" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:10000; justify-content:center; align-items:center;">
	<div style="background:#222; color:white; padding:20px; border-radius:15px; width:90%; max-width:400px; border:2px solid var(--gold);">
    	<h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ</h3>
    	<select id="adm_cat" style="width:100%; padding:10px; margin-bottom:10px;">
        	<option value="fabric">Ø¥Ø¶Ø§ÙØ© Ù‚Ù…Ø§Ø´ ØªÙØµÙŠÙ„</option>
        	<option value="ready">Ù…Ù†ØªØ¬ Ø¬Ø§Ù‡Ø²</option>
    	</select>
    	<input type="file" id="adm_file" onchange="encodeImg(this)" style="width:100%; margin-bottom:10px;">
    	<input type="text" id="adm_title" placeholder="Ø§Ù„Ø§Ø³Ù…" style="width:100%; margin-bottom:10px; padding:10px;">
    	<input type="text" id="adm_desc" placeholder="ÙˆØµÙ Ø§Ù„Ù…Ù†ØªØ¬" style="width:100%; margin-bottom:10px; padding:10px;">
    	<div style="display:flex; gap:5px;">
            <input type="number" id="adm_old" placeholder="Ø§Ù„Ø³Ø¹Ø± Ù‚Ø¨Ù„" style="width:50%; margin-bottom:10px; padding:10px;">
            <input type="number" id="adm_new" placeholder="Ø§Ù„Ø³Ø¹Ø± Ø¨Ø¹Ø¯" style="width:50%; margin-bottom:10px; padding:10px;">
        </div>
    	<button onclick="saveProduct()" style="width:100%; padding:15px; background:var(--gold); color:white; border:none; border-radius:10px; font-weight:bold;">Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
    	<button onclick="closeAdmin()" style="width:100%; background:none; border:none; color:#ccc; margin-top:10px;">Ø¥ØºÙ„Ø§Ù‚</button>
	</div>
</div>

<div id="fabricModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:9999; justify-content:center; align-items:center;">
	<div style="background:white; width:90%; max-width:400px; padding:20px; border-radius:15px;">
    	<h3 style="text-align:center;">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ù‚Ù…Ø§Ø´</h3>
    	<div id="modal_fabric_list" style="display:grid; grid-template-columns:1fr 1fr; gap:10px;"></div>
    	<button onclick="document.getElementById('fabricModal').style.display='none'" style="width:100%; margin-top:15px; padding:10px; border:none; border-radius:8px;">Ø¥ØºÙ„Ø§Ù‚</button>
	</div>
</div>

<script>
	let db = JSON.parse(localStorage.getItem('yarmouk_db')) || { fabrics: [], ready: [] };
	let tempImg = ""; let receiptImg = ""; let readyCartTotal = 0; let readyCartItems = [];

	window.onload = () => { filterReady(); };

	function toggleYaqoot() {
    	const chat = document.getElementById('yaqoot_chat');
    	chat.style.display = chat.style.display === 'block' ? 'none' : 'block';
	}

	function yaqootReply(type) {
    	const text = document.getElementById('chat_text');
    	text.innerHTML = type === 'policy' ? "<b>ÙŠØ§Ù‚ÙˆØª:</b> Ù†Ø¶Ù…Ù† Ù„Ùƒ Ø§Ù„Ù…Ù‚Ø§Ø³ 100%." : "<b>ÙŠØ§Ù‚ÙˆØª:</b> Ø§Ø¯ÙØ¹ Ø§Ù„Ø¢Ù† ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù‡Ø¯ÙŠØ©!";
	}

	function openAdmin() { if(prompt("ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:") === "1234") document.getElementById('adminPanel').style.display='flex'; }
	function closeAdmin() { document.getElementById('adminPanel').style.display='none'; }
	function encodeImg(i) { let r = new FileReader(); r.onload = (e) => tempImg = e.target.result; r.readAsDataURL(i.files[0]); }
	function encodeReceipt(i) { let r = new FileReader(); r.onload = (e) => receiptImg = e.target.result; r.readAsDataURL(i.files[0]); }

	function switchMainTab(t) {
    	document.querySelectorAll('.section, .tab-btn').forEach(el => el.classList.remove('active'));
    	document.getElementById('section_'+t).classList.add('active');
    	event.currentTarget.classList.add('active');
	}

    // ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø¨Ø· Ø¨Ø§Ù„Ø³Ø­Ø§Ø¨Ø© Ù‡Ù†Ø§
	function saveProduct() {
    	const cat = document.getElementById('adm_cat').value;
    	const item = { 
            id: Date.now(), 
            title: document.getElementById('adm_title').value, 
            desc: document.getElementById('adm_desc').value,
            oldPrice: document.getElementById('adm_old').value || 0,
            newPrice: document.getElementById('adm_new').value,
            img: tempImg 
        };
        
    	if (cat === 'fabric') db.fabrics.push(item); else db.ready.push(item);
        
        localStorage.setItem('yarmouk_db', JSON.stringify(db));
        
        // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø³Ø­Ø§Ø¨Ø©
        saveProductToCloud(item); 
        
    	alert("âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ø°Ø§ÙƒØ±Ø©");
        
        if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¢Ø®Ø±ØŸ")) {
            document.getElementById('adm_file').click();
        } else {
            filterReady(); closeAdmin();
        }
	}

    // Ø¯Ø§Ù„Ø© Ø§Ù„Ø³Ø­Ø§Ø¨Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
    function saveProductToCloud(itemData) {
        fetch('https://ali991278.app.n8n.cloud/webhook-test/e4bcc169-93c0-42c5-8226-528f3c6a72e3', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ action: "save_product", product: itemData })
        });
    }

	function openFabricModal() {
    	const list = document.getElementById('modal_fabric_list');
    	list.innerHTML = db.fabrics.map(f => `
        	<div style="border:1px solid #ddd; padding:5px; text-align:center; cursor:pointer;" onclick="confirmFabricSelection('${f.title}', ${f.newPrice}, '${f.img}')">
            	<img src="${f.img}" style="width:100%; height:60px; object-fit:cover;">
            	<div style="font-size:10px;">${f.title}</div>
        	</div>
    	`).join('') || 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ù‚Ù…Ø´Ø©';
    	document.getElementById('fabricModal').style.display = 'flex';
	}

	function confirmFabricSelection(name, price, img) {
        let color = prompt("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„ÙˆÙ† Ù„Ù„Ù‚Ù…Ø§Ø´ Ø£Ùˆ ÙƒØªØ§Ø¨Ø© Ø±Ù‚Ù… Ø§Ù„Ù‚Ù…Ø§Ø´:");
        if(!color) return;
    	const id = Date.now();
    	const card = document.createElement('div');
    	card.className = 'selected-thobe-card';
    	card.id = `thobe_${id}`;
    	card.innerHTML = `
        	<button type="button" class="remove-card" onclick="removeThobe(${id})">Ã—</button>
        	<div style="display:flex; gap:10px; align-items:center;">
            	<img src="${img}" style="width:40px; height:40px; border-radius:5px; object-fit:cover;">
            	<div><b>Ù‚Ù…Ø§Ø´: ${name} (${color})</b><br><span style="color:green;">${price} Ø±ÙŠØ§Ù„</span></div>
        	</div>
        	<div style="display:grid; grid-template-columns:1fr 1fr; gap:5px; margin-top:10px;">
            	<select class="thobe-opt"><option>Ù‚Ù„Ø§Ø¨ Ù…Ù„ÙƒÙŠ</option><option>Ù‚Ù„Ø§Ø¨ ÙØ±Ù†Ø³ÙŠ</option><option>Ù‚Ù„Ø§Ø¨ Ø¯Ø§Ø¦Ø±ÙŠ</option><option>Ø³Ø§Ø¯Ø© Ù…Ø±Ø¨Ø¹</option><option>Ø³Ø§Ø¯Ø© Ø¯Ø§Ø¦Ø±ÙŠ</option><option>ØµÙŠÙ†ÙŠ</option></select>
            	<select class="thobe-opt"><option>ÙƒØ¨Ùƒ Ù‚Ù…Ø§Ø´</option><option>ÙƒØ¨Ùƒ Ø­Ø´Ùˆ Ù…Ø±Ø¨Ø¹</option><option>ÙƒØ¨Ùƒ Ø­Ø´Ùˆ Ø¯Ø§Ø¦Ø±ÙŠ</option><option>Ø³Ø§Ø¯Ø© Ø¨Ø¯ÙˆÙ† Ø²Ø±Ø§Ø±</option></select>
            	<select class="thobe-opt"><option>ÙƒØ¨Ø³ Ø¸Ø§Ù‡Ø±</option><option>Ø²Ø±Ø§Ø± Ù…Ø®ÙÙŠ</option><option>Ø³Ø­Ø§Ø¨ VIP</option></select>
            	<select class="thobe-opt"><option>Ù‚Ø·Ø±ÙŠ</option><option>Ø³Ø¹ÙˆØ¯ÙŠ</option><option>Ø¹Ù…Ø§Ù†ÙŠ</option><option>ÙƒÙˆÙŠØªÙŠ</option></select>
        	</div>
            <textarea class="thobe-opt" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø®ÙŠØ§Ø·Ø©..."></textarea>
        	<input type="hidden" class="item-price" value="${price}">
    	`;
    	document.getElementById('tailor_list').appendChild(card);
    	calcGrandTotal();
    	document.getElementById('fabricModal').style.display = 'none';
	}

	function filterReady() {
    	const display = document.getElementById('ready_display');
    	display.innerHTML = db.ready.map(i => `
        	<div class="product-card">
                <button class="del-badge" onclick="deleteItem(${i.id})">Ã—</button>
            	<img src="${i.img}">
            	<div style="padding:5px; font-size:13px; font-weight:bold;">${i.title}</div>
                <div style="font-size:10px; color:#777;">${i.desc}</div>
            	<div><span class="old-price">${i.oldPrice}</span><span class="new-price">${i.newPrice} Ø±ÙŠØ§Ù„</span></div>
            	<button onclick="addReadyToCart(${i.newPrice}, '${i.title}')" style="width:90%; margin-top:5px; background:var(--gold); border:none; color:white; border-radius:5px; padding:5px; cursor:pointer;">Ø¥Ø¶Ø§ÙØ©</button>
        	</div>
    	`).join('') || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª';
	}

    function deleteItem(id) { if(confirm("Ø­Ø°ÙØŸ")) { db.ready = db.ready.filter(x=>x.id!==id); db.fabrics = db.fabrics.filter(x=>x.id!==id); localStorage.setItem('yarmouk_db', JSON.stringify(db)); filterReady(); } }
	function addReadyToCart(p, n) { readyCartTotal += parseInt(p); readyCartItems.push(n); calcGrandTotal(); alert("ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© " + n); }
	function removeThobe(id) { document.getElementById(`thobe_${id}`).remove(); calcGrandTotal(); }
	function calcGrandTotal() {
    	let t = readyCartTotal;
    	document.querySelectorAll('.item-price').forEach(i => t += parseInt(i.value || 0));
    	document.getElementById('final_total').innerText = t.toLocaleString();
	}

	function selectPayment(m, d, el) {
    	document.getElementById('account_display').style.display = 'block';
    	document.getElementById('account_number').innerText = d;
    	document.getElementById('selected_payment').value = m + " (" + d + ")";
    	document.getElementById('receipt_section').style.display = 'block';
	}

    function submitOrder() {
        const name = document.getElementById('c_name').value;
        if (!name) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ");
        
        const orderData = {
            name: name,
            phone: document.getElementById('c_phone').value,
            total: document.getElementById('final_total').innerText,
            payment: document.getElementById('selected_payment').value,
            ready_items: readyCartItems,
            receipt: receiptImg ? "Ù…Ø±ÙÙ‚" : "ØºÙŠØ± Ù…Ø±ÙÙ‚"
        };

        fetch('https://ali991278.app.n8n.cloud/webhook-test/e4bcc169-93c0-42c5-8226-528f3c6a72e3', {
            method: 'POST', mode: 'no-cors', headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(orderData)
        }).then(() => {
            alert("Ø§ÙƒØªÙ…Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­ ÙÙŠ Ø§Ù„ÙŠØ±Ù…ÙˆÙƒ!");
            location.reload();
        });
    }
</script>
</body>
</html>
